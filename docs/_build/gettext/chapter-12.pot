# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2020, BSDv3 License
# This file is distributed under the same license as the py4web package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: py4web 20251209\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-12-18 20:03+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../chapter-12.rst:3
msgid "Forms"
msgstr ""

#: ../../chapter-12.rst:5
msgid "The Form class provides a high-level API for quickly building CRUD (create, update and delete) forms, especially for working on an existing database table. It can generate and process a form from a list of desired fields and/or from an existing database table."
msgstr ""

#: ../../chapter-12.rst:9
msgid "There are 3 types of forms:"
msgstr ""

#: ../../chapter-12.rst:11
msgid "CRUD Create forms:"
msgstr ""

#: ../../chapter-12.rst:24
msgid "CRUD Update forms:"
msgstr ""

#: ../../chapter-12.rst:37
msgid "Non-CRUD forms (not associated to a database):"
msgstr ""

#: ../../chapter-12.rst:54
msgid "The use of flash is optional. ``flash`` is defined in ``common.py`` in the scaffolding application. It simply stores a message in a cookie so it can be recovered and displayed after redirection. This is done in the default layout."
msgstr ""

#: ../../chapter-12.rst:59
msgid "In this chapter from now on we will assume the following model and an app derived from the scaffolding app:"
msgstr ""

#: ../../chapter-12.rst:73
msgid "The Form constructor"
msgstr ""

#: ../../chapter-12.rst:75
msgid "The ``Form`` constructor accepts the following arguments:"
msgstr ""

#: ../../chapter-12.rst:96
#: ../../chapter-12.rst:1483
msgid "Where:"
msgstr ""

#: ../../chapter-12.rst:98
msgid "``table``: a DAL table or a list of fields"
msgstr ""

#: ../../chapter-12.rst:99
msgid "``record``: a DAL record or record id"
msgstr ""

#: ../../chapter-12.rst:100
msgid "``readonly``: set to True to make a readonly form"
msgstr ""

#: ../../chapter-12.rst:101
msgid "``deletable``: set to False to disallow deletion of record"
msgstr ""

#: ../../chapter-12.rst:102
msgid "``formstyle``: a function that renders the form using helpers."
msgstr ""

#: ../../chapter-12.rst:103
msgid "Can be ``FormStyleDefault`` (default), ``FormStyleBulma``, ``FormStyleBootstrap4``, or ``FormStyleBootstrap5``."
msgstr ""

#: ../../chapter-12.rst:105
msgid "``dbio``: set to False to prevent any DB writes"
msgstr ""

#: ../../chapter-12.rst:106
msgid "``keep_values``: if set to true, it remembers the values of the previously submitted form"
msgstr ""

#: ../../chapter-12.rst:107
msgid "``form_name``: the optional name of this form"
msgstr ""

#: ../../chapter-12.rst:108
msgid "``hidden``: a dictionary of hidden fields that is added to the form"
msgstr ""

#: ../../chapter-12.rst:109
msgid "``validation``: an optional validator, see :ref:`Validation functions`"
msgstr ""

#: ../../chapter-12.rst:110
msgid "``csrf_session``: if None, no csrf token is added.  If a session, then a CSRF token is added and verified"
msgstr ""

#: ../../chapter-12.rst:111
msgid "``lifespan``: lifespan of CSRF token in seconds, to limit form validity"
msgstr ""

#: ../../chapter-12.rst:112
msgid "``signing_info``: information that should not change between when the CSRF token is signed and verified"
msgstr ""

#: ../../chapter-12.rst:114
msgid "``FormStyleDefault`` is an object that is used by default for every form and it is defined in ``py4web.utils.form.FormStyleDefault``. You should never change it but you can make a copy and pass it as ``formstyle``."
msgstr ""

#: ../../chapter-12.rst:118
msgid "You can change the style of a field named, for example, ``color`` by changing the attribute ``color`` of the FormStyle."
msgstr ""

#: ../../chapter-12.rst:123
msgid "A minimal form example without a database"
msgstr ""

#: ../../chapter-12.rst:125
msgid "Let's start with a minimal working form example. Create a new minimal app called ``form_minimal`` :"
msgstr ""

#: ../../chapter-12.rst:156
msgid "Also, you need to create a file inside the app called ``templates/form_minimal.html`` that just contains the line:"
msgstr ""

#: ../../chapter-12.rst:165
msgid "Then reload py4web and visit http://127.0.0.1:8000/form_minimal - you'll get the Form page:"
msgstr ""

#: ../../chapter-12.rst:169
msgid "Note that:"
msgstr ""

#: ../../chapter-12.rst:172
msgid "``Form`` is a class contained in the ``py4web.utils.form`` module"
msgstr ""

#: ../../chapter-12.rst:173
msgid "it's possible to use **form validators** like ``IS_NOT_EMPTY``, see :ref:`Form validation` later. They are imported from the ``pydal.validators`` module"
msgstr ""

#: ../../chapter-12.rst:175
msgid "it's normally important to use both the **GET** and the **POST** methods in the action where the form is contained"
msgstr ""

#: ../../chapter-12.rst:179
msgid "This example is intentionally not using a database, a template, nor the session management. The next example will."
msgstr ""

#: ../../chapter-12.rst:184
msgid "Basic form example"
msgstr ""

#: ../../chapter-12.rst:186
msgid "In this next basic example we generate a CRUD create form from a database. Create a new minimal app called ``form_basic`` :"
msgstr ""

#: ../../chapter-12.rst:207
msgid "Note the import of two simple validators on top, in order to be used later with the ``requires`` parameter. We'll fully explain them on the :ref:`Form validation` paragraph."
msgstr ""

#: ../../chapter-12.rst:211
msgid "You will also need a template file ``templates/form_basic.html`` that contains, for example, the following code:"
msgstr ""

#: ../../chapter-12.rst:231
msgid "Reload py4web and visit http://127.0.0.1:8000/create_form : the result is an input form on the top of the page, and the list of all the previously added entries on the bottom:"
msgstr ""

#: ../../chapter-12.rst:237
msgid "This is a simple example and you cannot change nor delete existing records. But if you'd like to experiment, the database content can be fully seen and changed with the Dashboard app."
msgstr ""

#: ../../chapter-12.rst:240
msgid "You can turn a create form into a CRUD update form by passing a record or a record id it second argument:"
msgstr ""

#: ../../chapter-12.rst:255
msgid "File upload field"
msgstr ""

#: ../../chapter-12.rst:257
msgid "We can make a minor modification to our reference model and an upload type file:"
msgstr ""

#: ../../chapter-12.rst:268
msgid "The file upload field is quite particular. The standard way to use it (as in the _scaffold app) is to have the UPLOAD_FOLDER defined in the common.py file. But if you don't specify it, then the default value of  ``your_app/upload`` folder will be used (and the folder will also be created if needed). ``download_url`` is a callback that given the image name, generated the URL to download. The ``download`` url is predefined in ``common.py``."
msgstr ""

#: ../../chapter-12.rst:274
msgid "We can modify ``form_basic.html`` to display the uploaded images:"
msgstr ""

#: ../../chapter-12.rst:292
msgid "The uploaded files (the thing images) are saved on the UPLOAD_FOLDER folder with their name hashed. Other details on the upload fields can be found on :ref:`Field constructor` paragraph, including a way to save the files inside the database itself."
msgstr ""

#: ../../chapter-12.rst:298
msgid "Widgets"
msgstr ""

#: ../../chapter-12.rst:301
msgid "Standard widgets"
msgstr ""

#: ../../chapter-12.rst:303
msgid "Py4web provides many widgets in the py4web.utility.form library. They are simple plugins that easily allow you to specify the type of the input elements in a form, along with some of their properties."
msgstr ""

#: ../../chapter-12.rst:307
msgid "Here is the full list:"
msgstr ""

#: ../../chapter-12.rst:309
msgid "CheckboxWidget"
msgstr ""

#: ../../chapter-12.rst:310
msgid "DateTimeWidget"
msgstr ""

#: ../../chapter-12.rst:311
msgid "FileUploadWidget"
msgstr ""

#: ../../chapter-12.rst:312
msgid "ListWidget"
msgstr ""

#: ../../chapter-12.rst:313
msgid "PasswordWidget"
msgstr ""

#: ../../chapter-12.rst:314
msgid "RadioWidget"
msgstr ""

#: ../../chapter-12.rst:315
msgid "SelectWidget"
msgstr ""

#: ../../chapter-12.rst:316
msgid "TextareaWidget"
msgstr ""

#: ../../chapter-12.rst:319
msgid "This is an improved 'Basic Form Example' with a radio button widget:"
msgstr ""

#: ../../chapter-12.rst:339
msgid "Notice the differences from the 'Basic Form example' we've seen at the beginning of the chapter:"
msgstr ""

#: ../../chapter-12.rst:342
msgid "you need to import the widget from the py4web.utils.form library"
msgstr ""

#: ../../chapter-12.rst:343
msgid "before the form definition, you define the ``color`` field form style with the line:"
msgstr ""

#: ../../chapter-12.rst:349
msgid "The result is the same as before, but now we have a radio button widget instead of the dropdown menu!"
msgstr ""

#: ../../chapter-12.rst:352
msgid "Using widgets in forms is quite easy, and they'll let you have more control on its pieces."
msgstr ""

#: ../../chapter-12.rst:356
msgid "When using py4web, use py4web widgets, and do not use the pydal widget argument in the Field object (see :ref:`Field constructor`)."
msgstr ""

#: ../../chapter-12.rst:360
msgid "Custom widgets"
msgstr ""

#: ../../chapter-12.rst:362
msgid "You can also customize the widgets properties by cloning and modifying and existing style. Let's have a quick look, improving again our Superhero example:"
msgstr ""

#: ../../chapter-12.rst:403
msgid "The result is similar to the previous ones, but now we have a custom input field, with foreground color red and background color black,"
msgstr ""

#: ../../chapter-12.rst:406
msgid "Even the radio button widget has changed, from red to blue."
msgstr ""

#: ../../chapter-12.rst:409
msgid "Advanced form design"
msgstr ""

#: ../../chapter-12.rst:412
msgid "Form structure manipulation"
msgstr ""

#: ../../chapter-12.rst:414
msgid "In py4web a form is rendered by YATL helpers. This means the tree structure of a form can be manipulated before the form is serialized in HTML. Here is an example of how to manipulate the generate HTML structure:"
msgstr ""

#: ../../chapter-12.rst:424
msgid "Notice that a form does not make an HTML tree until form structure is accessed. Once accessed you can use ``.find(...)`` to find matching elements. The argument of ``find`` is a string following the filter syntax of jQuery. In the above case there is a single match ``[0]`` and we modify the ``_class`` attribute of that element. Attribute names of HTML elements must be preceded by an underscore."
msgstr ""

#: ../../chapter-12.rst:430
msgid "Custom forms"
msgstr ""

#: ../../chapter-12.rst:432
msgid "Custom forms allow you to granulary control how the form is processed. In the template file, you can execute specific instructions before the form is displayed or after its data submission by inserting code among the following statements:"
msgstr ""

#: ../../chapter-12.rst:442
msgid "For example you could use it to avoid displaying the ``id`` field while editing a record in your form:"
msgstr ""

#: ../../chapter-12.rst:458
msgid "Note: 'custom' is just a convention, it could be any name that does not clash with already defined objects."
msgstr ""

#: ../../chapter-12.rst:462
msgid "When working with custom forms, if you have a writable field that isn't included on your form, it will be set to null when you save a record.  Any time a field is not included on a custom form, it should be set field.writable=False to ensure that field is not updated."
msgstr ""

#: ../../chapter-12.rst:466
msgid "Also, custom forms only create the element for a given field, but no surrounding elements that might be needed based on your css framework.  For example, if you're using Bulma as your css framework, you'll have to add an outer DIV in order to get select controls to appear correctly."
msgstr ""

#: ../../chapter-12.rst:472
msgid "You can also be more creative and use your HTML in the template instead of using widgets:"
msgstr ""

#: ../../chapter-12.rst:500
msgid "The sidecar parameter"
msgstr ""

#: ../../chapter-12.rst:502
msgid "The sidecar is the stuff injected in the form along with the submit button."
msgstr ""

#: ../../chapter-12.rst:504
msgid "For example, you can inject a simple ``click me`` button in your form with the following code:"
msgstr ""

#: ../../chapter-12.rst:512
msgid "In particular, this is frequently used for adding a ``Cancel`` button, which is not provided by py4web:"
msgstr ""

#: ../../chapter-12.rst:525
msgid "Form validation"
msgstr ""

#: ../../chapter-12.rst:527
msgid "Validators are classes used to validate input fields (including forms generated from database tables). They are normally assigned using the ``requires`` attribute of a table ``Field`` object, as already shown on the :ref:`Field constructor` paragraph of the DAL chapter. Also, you can use advanced validators in order to create widgets such as drop-down menus, radio buttons and even lookups from other tables. Last but not least, you can even explicitly define a validation function."
msgstr ""

#: ../../chapter-12.rst:534
msgid "Here is a simple example of how to require a validator for a table field:"
msgstr ""

#: ../../chapter-12.rst:544
msgid "The validator is frequently written explicitly outside the table definition in this equivalent syntax:"
msgstr ""

#: ../../chapter-12.rst:557
msgid "A field can have a single validator or a list of multiple validators:"
msgstr ""

#: ../../chapter-12.rst:565
msgid "Mind that the only validators that can be used with ``list:`` type fields are:"
msgstr ""

#: ../../chapter-12.rst:567
msgid "``IS_IN_DB(..., multiple=True)``"
msgstr ""

#: ../../chapter-12.rst:568
msgid "``IS_IN_SET(..., multiple=True)``"
msgstr ""

#: ../../chapter-12.rst:569
msgid "``IS_NOT_EMPTY()``"
msgstr ""

#: ../../chapter-12.rst:570
msgid "``IS_LIST_OF_EMAILS()``"
msgstr ""

#: ../../chapter-12.rst:571
msgid "``IS_LIST_OF(...)``"
msgstr ""

#: ../../chapter-12.rst:573
msgid "The latter can be used to apply any validator to the individual items in the list. ``multiple=(1, 1000)`` requires a selection of between 1 and 1000 items. This enforces selection of at least one choice."
msgstr ""

#: ../../chapter-12.rst:577
msgid "Built-in validators have constructors that take an ``error_message`` argument:"
msgstr ""

#: ../../chapter-12.rst:583
msgid "Notice the error message is usually fist option of the constructors and you can normally avoid to name it. Hence the following syntax is equivalent:"
msgstr ""

#: ../../chapter-12.rst:586
msgid "If you want to use internationalization like explained in a previous chapter you need to define your own messages and wrap the validator message in the T operator:"
msgstr ""

#: ../../chapter-12.rst:589
msgid "IS_NOT_EMPTY(error_message=T('cannot be empty!'))"
msgstr ""

#: ../../chapter-12.rst:595
msgid "Here is an example of a validator on a database table:"
msgstr ""

#: ../../chapter-12.rst:602
msgid "where we have used the translation operator ``T`` to allow for internationalization. Notice that error messages are not translated by default unless you define them explicitly with ``T``."
msgstr ""

#: ../../chapter-12.rst:605
msgid "One can also call validators explicitly for a field:"
msgstr ""

#: ../../chapter-12.rst:612
msgid "which returns a tuple ``(value, error)`` and ``error`` is ``None`` if the value validates."
msgstr ""

#: ../../chapter-12.rst:614
msgid "You can easily test most of the following validators directly using python only. For example:"
msgstr ""

#: ../../chapter-12.rst:631
msgid "The DAL validators are well documented inside the python source code. You can easily check it by yourself for all the details!"
msgstr ""

#: ../../chapter-12.rst:641
msgid "Text format validators"
msgstr ""

#: ../../chapter-12.rst:645
msgid "``IS_ALPHANUMERIC``"
msgstr ""

#: ../../chapter-12.rst:647
msgid "This validator checks that a field value contains only characters in the ranges a-z, A-Z, 0-9, and underscores."
msgstr ""

#: ../../chapter-12.rst:655
msgid "``IS_LOWER``"
msgstr ""

#: ../../chapter-12.rst:657
msgid "This validator never returns an error. It just converts the value to lower case."
msgstr ""

#: ../../chapter-12.rst:665
msgid "``IS_UPPER``"
msgstr ""

#: ../../chapter-12.rst:667
msgid "This validator never returns an error. It converts the value to upper case."
msgstr ""

#: ../../chapter-12.rst:676
msgid "``IS_EMAIL``"
msgstr ""

#: ../../chapter-12.rst:678
msgid "It checks that the field value looks like an email address. It does not try to send email to confirm."
msgstr ""

#: ../../chapter-12.rst:686
msgid "``IS_MATCH``"
msgstr ""

#: ../../chapter-12.rst:688
msgid "This validator matches the value against a regular expression and returns an error if it does not match. Here is an example of usage to validate a US zip code:"
msgstr ""

#: ../../chapter-12.rst:696
msgid "Here is an example of usage to validate an IPv4 address (note: the IS_IPV4 validator is more appropriate for this purpose):"
msgstr ""

#: ../../chapter-12.rst:704
msgid "Here is an example of usage to validate a US phone number:"
msgstr ""

#: ../../chapter-12.rst:712
msgid "For more information on Python regular expressions, refer to the official Python documentation."
msgstr ""

#: ../../chapter-12.rst:714
msgid "``IS_MATCH`` takes an optional argument ``strict`` which defaults to ``False``. When set to ``True`` it only matches the whole string (from the beginning to the end):"
msgstr ""

#: ../../chapter-12.rst:726
msgid "``IS_MATCH`` takes an other optional argument ``search`` which defaults to ``False``. When set to ``True``, it uses regex method ``search`` instead of method ``match`` to validate the string."
msgstr ""

#: ../../chapter-12.rst:728
msgid "``IS_MATCH('...', extract=True)`` filters and extract only the first matching substring rather than the original value."
msgstr ""

#: ../../chapter-12.rst:732
msgid "``IS_LENGTH``"
msgstr ""

#: ../../chapter-12.rst:734
msgid "Checks if length of field's value fits between given boundaries. Works for both text and file inputs."
msgstr ""

#: ../../chapter-12.rst:737
#: ../../chapter-12.rst:1378
#: ../../chapter-12.rst:1436
msgid "Its arguments are:"
msgstr ""

#: ../../chapter-12.rst:739
msgid "maxsize: the maximum allowed length / size (has default = 255)"
msgstr ""

#: ../../chapter-12.rst:740
msgid "minsize: the minimum allowed length / size"
msgstr ""

#: ../../chapter-12.rst:742
msgid "Examples: Check if text string is shorter than 16 characters:"
msgstr ""

#: ../../chapter-12.rst:757
msgid "Check if uploaded file has size between 1KB and 1MB:"
msgstr ""

#: ../../chapter-12.rst:764
msgid "For all field types except for files, it checks the length of the value. In the case of files, the value is a ``cgi.FieldStorage``, so it validates the length of the data in the file, which is the behavior one might intuitively expect."
msgstr ""

#: ../../chapter-12.rst:769
msgid "``IS_URL``"
msgstr ""

#: ../../chapter-12.rst:771
msgid "Rejects a URL string if any of the following is true:"
msgstr ""

#: ../../chapter-12.rst:773
#: ../../chapter-12.rst:787
msgid "The string is empty or None"
msgstr ""

#: ../../chapter-12.rst:774
#: ../../chapter-12.rst:788
msgid "The string uses characters that are not allowed in a URL"
msgstr ""

#: ../../chapter-12.rst:775
msgid "The string breaks any of the HTTP syntactic rules"
msgstr ""

#: ../../chapter-12.rst:776
msgid "The URL scheme specified (if one is specified) is not 'http' or 'https'"
msgstr ""

#: ../../chapter-12.rst:777
msgid "The top-level domain (if a host name is specified) does not exist"
msgstr ""

#: ../../chapter-12.rst:779
msgid "(These rules are based on ``RFC 2616``)"
msgstr ""

#: ../../chapter-12.rst:781
msgid "This function only checks the URL's syntax. It does not check that the URL points to a real document, for example, or that it otherwise makes semantic sense. This function does automatically prepend 'http://' in front of a URL in the case of an abbreviated URL (e.g. 'google.ca'). If the parameter ``mode='generic'`` is used, then this function's behavior changes. It then rejects a URL string if any of the following is true:"
msgstr ""

#: ../../chapter-12.rst:789
msgid "The URL scheme specified (if one is specified) is not valid"
msgstr ""

#: ../../chapter-12.rst:791
msgid "(These rules are based on ``RFC 2396``)"
msgstr ""

#: ../../chapter-12.rst:793
msgid "The list of allowed schemes is customizable with the allowed_schemes parameter. If you exclude None from the list, then abbreviated URLs (lacking a scheme such as 'http') will be rejected."
msgstr ""

#: ../../chapter-12.rst:796
msgid "The default prepended scheme is customizable with the prepend_scheme parameter. If you set prepend_scheme to None, then prepending will be disabled. URLs that require prepending to parse will still be accepted, but the return value will not be modified."
msgstr ""

#: ../../chapter-12.rst:800
msgid "IS_URL is compatible with the Internationalized Domain Name (IDN) standard specified in ``RFC 3490``). As a result, URLs can be regular strings or unicode strings. If the URL's domain component (e.g. google.ca) contains non-US-ASCII letters, then the domain will be converted into Punycode (defined in ``RFC 3492``). IS_URL goes a bit beyond the standards, and allows non-US-ASCII characters to be present in the path and query components of the URL as well. These non-US-ASCII characters will be encoded. For example, space will be encoded as'%20'. The unicode character with hex code 0x4e86 will become '%4e%86'."
msgstr ""

#: ../../chapter-12.rst:809
#: ../../chapter-12.rst:1446
#: ../../chapter-12.rst:1517
#: ../../chapter-12.rst:1573
#: ../../chapter-12.rst:1623
msgid "Examples:"
msgstr ""

#: ../../chapter-12.rst:823
msgid "``IS_SAFE``"
msgstr ""

#: ../../chapter-12.rst:831
msgid "This validators is for text fields that should contain HTML and may contain invalid tags (script, ember, object, iframe). It works by trying to sanitize the content and either provide an error (mode=\"error\") or replacing the content with the sanitized one (mode=\"sanitize\"). You can specify the error message, the mode, and provide your own sanitizer."
msgstr ""

#: ../../chapter-12.rst:836
msgid "``IS_SLUG``"
msgstr ""

#: ../../chapter-12.rst:843
msgid "If ``check`` is set to ``True`` it check whether the validated value is a slug (allowing only alphanumeric characters and non-repeated dashes)."
msgstr ""

#: ../../chapter-12.rst:845
msgid "If ``check`` is set to ``False`` (default) it converts the input value to a slug."
msgstr ""

#: ../../chapter-12.rst:848
msgid "``IS_JSON``"
msgstr ""

#: ../../chapter-12.rst:855
msgid "This validator checks that a field value is in JSON format."
msgstr ""

#: ../../chapter-12.rst:857
msgid "If ``native_json`` is set to ``False`` (default) it converts the input value to the serialized value otherwise the input value is left unchanged."
msgstr ""

#: ../../chapter-12.rst:860
msgid "Date and time validators"
msgstr ""

#: ../../chapter-12.rst:863
msgid "``IS_TIME``"
msgstr ""

#: ../../chapter-12.rst:865
msgid "This validator checks that a field value contains a valid time in the specified format."
msgstr ""

#: ../../chapter-12.rst:873
msgid "``IS_DATE``"
msgstr ""

#: ../../chapter-12.rst:875
msgid "This validator checks that a field value contains a valid date in the specified format. It is good practice to specify the format using the translation operator, in order to support different formats in different locales."
msgstr ""

#: ../../chapter-12.rst:883
#: ../../chapter-12.rst:926
#: ../../chapter-12.rst:941
msgid "For the full description on % directives look under the IS_DATETIME validator."
msgstr ""

#: ../../chapter-12.rst:886
msgid "``IS_DATETIME``"
msgstr ""

#: ../../chapter-12.rst:888
msgid "This validator checks that a field value contains a valid datetime in the specified format. It is good practice to specify the format using the translation operator, in order to support different formats in different locales."
msgstr ""

#: ../../chapter-12.rst:896
msgid "The following symbols can be used for the format string (this shows the symbol, their meaning, and an example string):"
msgstr ""

#: ../../chapter-12.rst:914
msgid "``IS_DATE_IN_RANGE``"
msgstr ""

#: ../../chapter-12.rst:916
#: ../../chapter-12.rst:931
msgid "Works very much like the previous validator but allows to specify a range:"
msgstr ""

#: ../../chapter-12.rst:929
msgid "``IS_DATETIME_IN_RANGE``"
msgstr ""

#: ../../chapter-12.rst:944
msgid "Range, set and equality validators"
msgstr ""

#: ../../chapter-12.rst:947
msgid "``IS_EQUAL_TO``"
msgstr ""

#: ../../chapter-12.rst:949
msgid "Checks whether the validated value is equal to a given value (which can be a variable):"
msgstr ""

#: ../../chapter-12.rst:958
msgid "``IS_NOT_EMPTY``"
msgstr ""

#: ../../chapter-12.rst:960
msgid "This validator checks that the content of the field value is neither None nor an empty string nor an empty list. A string value is checked for after a ``.strip()``."
msgstr ""

#: ../../chapter-12.rst:967
msgid "You can provide a regular expression for the matching of the empty string."
msgstr ""

#: ../../chapter-12.rst:975
msgid "``IS_NULL_OR``"
msgstr ""

#: ../../chapter-12.rst:977
msgid "Deprecated, an alias for ``IS_EMPTY_OR`` described below."
msgstr ""

#: ../../chapter-12.rst:980
msgid "``IS_EMPTY_OR``"
msgstr ""

#: ../../chapter-12.rst:982
msgid "Sometimes you need to allow empty values on a field along with other requirements. For example a field may be a date but it can also be empty. The ``IS_EMPTY_OR`` validator allows this:"
msgstr ""

#: ../../chapter-12.rst:990
msgid "An empty value is either None or an empty string or an empty list. A string value is checked for after a ``.strip()``."
msgstr ""

#: ../../chapter-12.rst:992
msgid "You can provide a regular expression for the matching of the empty string with the ``empty_regex`` argument (like for IS_NOT_EMPTY validator)."
msgstr ""

#: ../../chapter-12.rst:994
msgid "You may also specify a value to be used for the empty case."
msgstr ""

#: ../../chapter-12.rst:1002
msgid "``IS_EXPR``"
msgstr ""

#: ../../chapter-12.rst:1004
msgid "This validator let you express a general condition by means of a callable which takes a value to validate and returns the error message or ``None`` to accept the input value."
msgstr ""

#: ../../chapter-12.rst:1012
msgid "**Notice** that returned message will not be translated if you do not arrange otherwise."
msgstr ""

#: ../../chapter-12.rst:1015
msgid "For backward compatibility the condition may be expressed as a string containing a logical expression in terms of a variable value. It validates a field value if the expression evaluates to ``True``."
msgstr ""

#: ../../chapter-12.rst:1023
msgid "One should first check that the value is an integer so that an exception will not occur."
msgstr ""

#: ../../chapter-12.rst:1033
msgid "``IS_DECIMAL_IN_RANGE``"
msgstr ""

#: ../../chapter-12.rst:1040
msgid "It converts the input into a Python Decimal or generates an error if the decimal does not fall within the specified inclusive range. The comparison is made with Python Decimal arithmetic."
msgstr ""

#: ../../chapter-12.rst:1044
msgid "The minimum and maximum limits can be None, meaning no lower or upper limit, respectively."
msgstr ""

#: ../../chapter-12.rst:1047
#: ../../chapter-12.rst:1060
msgid "The ``dot`` argument is optional and allows you to internationalize the symbol used to separate the decimals."
msgstr ""

#: ../../chapter-12.rst:1050
msgid "``IS_FLOAT_IN_RANGE``"
msgstr ""

#: ../../chapter-12.rst:1052
msgid "Checks that the field value is a floating point number within a definite range, ``0 <= value <= 100`` in the following example:"
msgstr ""

#: ../../chapter-12.rst:1063
msgid "``IS_INT_IN_RANGE``"
msgstr ""

#: ../../chapter-12.rst:1065
msgid "Checks that the field value is an integer number within a definite range,"
msgstr ""

#: ../../chapter-12.rst:1066
msgid "``0 <= value < 100`` in the following example:"
msgstr ""

#: ../../chapter-12.rst:1075
msgid "``IS_IN_SET``"
msgstr ""

#: ../../chapter-12.rst:1077
msgid "This validator will automatically set the form field to an option field (ie, with a drop-down menu)."
msgstr ""

#: ../../chapter-12.rst:1079
msgid "``IS_IN_SET`` checks that the field values are in a set:"
msgstr ""

#: ../../chapter-12.rst:1087
msgid "The zero argument is optional and it determines the text of the option selected by default, an option which is not accepted by the ``IS_IN_SET`` validator itself. If you do not want a \"choose one\" option, set ``zero=None``."
msgstr ""

#: ../../chapter-12.rst:1090
msgid "The elements of the set can be combined with a numerical validator, as long as IS_IN_SET is first in the list. Doing so will force conversion by the last validator to the numerical type. So, IS_IN_SET can be followed by ``IS_INT_IN_RANGE`` (which converts the value to int) or ``IS_FLOAT_IN_RANGE`` (which converts the value to float). For example:"
msgstr ""

#: ../../chapter-12.rst:1102
msgid "Checkbox validation"
msgstr ""

#: ../../chapter-12.rst:1103
msgid "To force a filled-in form checkbox (such as an acceptance of terms and conditions), use this:"
msgstr ""

#: ../../chapter-12.rst:1111
msgid "Dictionaries and tuples with IS_IN_SET"
msgstr ""

#: ../../chapter-12.rst:1113
msgid "You may also use a dictionary or a list of tuples to make the drop down list more descriptive:"
msgstr ""

#: ../../chapter-12.rst:1125
msgid "Sorted options"
msgstr ""

#: ../../chapter-12.rst:1127
msgid "To keep the options alphabetically sorted by their labels into the drop down list, use the ``sort`` argument with IS_IN_SET."
msgstr ""

#: ../../chapter-12.rst:1135
msgid "``IS_IN_SET`` and Tagging"
msgstr ""

#: ../../chapter-12.rst:1137
msgid "The ``IS_IN_SET`` validator has an optional attribute ``multiple=False``. If set to True, multiple values can be stored in one field. The field should be of type ``list:integer`` or ``list:string`` as discussed in :ref:`list_type and contains`. An explicit example of tagging is discussed there. We strongly suggest using the jQuery multiselect plugin to render multiple fields."
msgstr ""

#: ../../chapter-12.rst:1141
msgid "**Note** that when ``multiple=True``, ``IS_IN_SET`` will accept zero or more values, i.e. it will accept the field when nothing has been selected. ``multiple`` can also be a tuple of the form ``(a, b)`` where ``a`` and ``b`` are the minimum and (exclusive) maximum number of items that can be selected respectively."
msgstr ""

#: ../../chapter-12.rst:1148
msgid "Complexity and security validators"
msgstr ""

#: ../../chapter-12.rst:1151
msgid "``IS_STRONG``"
msgstr ""

#: ../../chapter-12.rst:1153
msgid "Enforces complexity requirements on a field (usually a password field)."
msgstr ""

#: ../../chapter-12.rst:1155
msgid "Example:"
msgstr ""

#: ../../chapter-12.rst:1162
msgid "where:"
msgstr ""

#: ../../chapter-12.rst:1164
msgid "``min`` is minimum length of the value"
msgstr ""

#: ../../chapter-12.rst:1165
msgid "``special`` is the minimum number of required special characters, by default special characters are any of the following ``^!!@#$%^&*()_+-=?<>,.:;{}[]|`` (you can customize these using ``specials = '...'``)"
msgstr ""

#: ../../chapter-12.rst:1167
msgid "``upper`` is the minimum number of upper case characters"
msgstr ""

#: ../../chapter-12.rst:1169
msgid "other accepted arguments are:"
msgstr ""

#: ../../chapter-12.rst:1171
msgid "``invalid`` for the list of forbidden characters, by default ``invalid=' \"'``"
msgstr ""

#: ../../chapter-12.rst:1172
msgid "``max`` for the maximum length of the value"
msgstr ""

#: ../../chapter-12.rst:1173
msgid "``lower`` for the minimum number of lower case characters"
msgstr ""

#: ../../chapter-12.rst:1174
msgid "``number`` for the minimum number of digit characters"
msgstr ""

#: ../../chapter-12.rst:1176
msgid "Obviously you can provide an ``error_message`` as for any other validator, although IS_STRONG is clever enough to provide a clear message to describe the validation failure."
msgstr ""

#: ../../chapter-12.rst:1178
msgid "A special argument you can use is ``entropy``, that is a minimum value for the complexity of the value to accept (a number), experiment this with:"
msgstr ""

#: ../../chapter-12.rst:1186
msgid "**Notice** that if the argument ``entropy`` is not given then IS_STRONG implicitly sets the following defaults: ``min = 8, upper = 1, lower = 1, number = 1, special = 1`` which otherwise are all sets to ``None``."
msgstr ""

#: ../../chapter-12.rst:1191
msgid "``CRYPT``"
msgstr ""

#: ../../chapter-12.rst:1193
msgid "This is also a filter. It performs a secure hash on the input and it is used to prevent passwords from being passed in the clear to the database."
msgstr ""

#: ../../chapter-12.rst:1200
msgid "By default, CRYPT uses 1000 iterations of the pbkdf2 algorithm combined with SHA512 to produce a 20-byte-long hash. Old versions of web2py used md5 or HMAC+SHA512 depending on whether a key was specified or not."
msgstr ""

#: ../../chapter-12.rst:1203
msgid "If a key is specified, CRYPT uses the HMAC algorithm. The key may contain a prefix that determines the algorithm to use with HMAC, for example SHA512:"
msgstr ""

#: ../../chapter-12.rst:1210
msgid "This is the recommended syntax. The key must be a unique string associated with the database used. The key can never be changed. If you lose the key, the previously hashed values become useless. By default, CRYPT uses random salt, such that each result is different. To use a constant salt value, specify its value:"
msgstr ""

#: ../../chapter-12.rst:1218
msgid "Or, to use no salt:"
msgstr ""

#: ../../chapter-12.rst:1225
msgid "The CRYPT validator hashes its input, and this makes it somewhat special. If you need to validate a password field before it is hashed, you can use CRYPT in a list of validators, but must make sure it is the last of the list, so that it is called last. For example:"
msgstr ""

#: ../../chapter-12.rst:1233
msgid "``CRYPT`` also takes a ``min_length`` argument, which defaults to zero."
msgstr ""

#: ../../chapter-12.rst:1235
msgid "The resulting hash takes the form ``alg$salt$hash``, where ``alg`` is the hash algorithm used, ``salt`` is the salt string (which can be empty), and ``hash`` is the algorithm's output. Consequently, the hash is self-identifying, allowing, for example, the algorithm to be changed without invalidating previous hashes. The key, however, must remain the same."
msgstr ""

#: ../../chapter-12.rst:1241
msgid "Special type validators"
msgstr ""

#: ../../chapter-12.rst:1244
msgid "``IS_LIST_OF``"
msgstr ""

#: ../../chapter-12.rst:1246
msgid "This validator helps you to ensure length limits on values of type list, for this purpose use its ``minimum``, ``maximum``, and ``error_message`` arguments, for example:"
msgstr ""

#: ../../chapter-12.rst:1254
msgid "A list value may comes from a form containing multiple fields with the same name or a multiple selection box. Note that this validator automatically converts a non-list value into a single valued list:"
msgstr ""

#: ../../chapter-12.rst:1263
msgid "If the first argument of IS_LIST_OF is another validator, then it applies the other validator to each element of the list. A typical usage is validation of a ``list:`` type field, for example:"
msgstr ""

#: ../../chapter-12.rst:1272
msgid "``IS_LIST_OF_EMAILS``"
msgstr ""

#: ../../chapter-12.rst:1274
msgid "This validator is specifically designed to work with the following field:"
msgstr ""

#: ../../chapter-12.rst:1285
msgid "Notice that due to the ``widget`` customization this field will be rendered by a textarea in SQLFORMs (see next [[Widgets #Widgets]] section). This let you insert and edit multiple emails in a single input field (very much like normal mail client programs do), separating each email address with ``,``, ``;``, and blanks (space, newline, and tab characters). As a consequence now we need a validator which is able to operate on a single value input and a way to split the validated value into a list to be next processed by DAL. This is accomplished by the ``requires`` validator. As alternative to ``filter_in``, you can pass the following function to the ``onvalidation`` argument of form ``accepts``, ``process``, or ``validate`` method:"
msgstr ""

#: ../../chapter-12.rst:1299
msgid "The effect of the ``represent`` argument (at lines 6 and 7) is to add a \"mailto:...\" link to each email address when the record is rendered in HTML pages."
msgstr ""

#: ../../chapter-12.rst:1302
msgid "``ANY_OF``"
msgstr ""

#: ../../chapter-12.rst:1304
msgid "This validator takes a list of validators and accepts a value if any of the validators in the list does (i.e. it acts like a logical OR with respect to given validators)."
msgstr ""

#: ../../chapter-12.rst:1312
msgid "When none of the validators accepts the value you get the error message form the last attempted one (the last in the list), you can customize the error message as usual:"
msgstr ""

#: ../../chapter-12.rst:1325
msgid "``IS_IMAGE``"
msgstr ""

#: ../../chapter-12.rst:1327
msgid "This validator checks if a file uploaded through the file input was saved in one of the selected image formats and has dimensions (width and height) within given limits."
msgstr ""

#: ../../chapter-12.rst:1330
msgid "It does not check for maximum file size (use IS_LENGTH for that). It returns a validation failure if no data was uploaded. It supports the file formats BMP, GIF, JPEG, PNG, and it does not require the Python Imaging Library."
msgstr ""

#: ../../chapter-12.rst:1333
msgid "Code parts taken from ref.``source1``:cite"
msgstr ""

#: ../../chapter-12.rst:1335
msgid "It takes the following arguments: - extensions: iterable containing allowed image file extensions in lowercase - maxsize: iterable containing maximum width and height of the image - minsize: iterable containing minimum width and height of the image"
msgstr ""

#: ../../chapter-12.rst:1340
msgid "Use (-1, -1) as minsize to bypass the image-size check."
msgstr ""

#: ../../chapter-12.rst:1342
msgid "Here are some Examples: - Check if uploaded file is in any of supported image formats:"
msgstr ""

#: ../../chapter-12.rst:1349
msgid "Check if uploaded file is either JPEG or PNG:"
msgstr ""

#: ../../chapter-12.rst:1356
msgid "Check if uploaded file is PNG with maximum size of 200x200 pixels:"
msgstr ""

#: ../../chapter-12.rst:1363
msgid "Note: on displaying an edit form for a table including ``requires = IS_IMAGE()``, a ``delete`` checkbox will NOT appear because to delete the file would cause the validation to fail. To display the ``delete`` checkbox use this validation:"
msgstr ""

#: ../../chapter-12.rst:1372
msgid "``IS_FILE``"
msgstr ""

#: ../../chapter-12.rst:1374
msgid "Checks if name and extension of file uploaded through file input matches given criteria."
msgstr ""

#: ../../chapter-12.rst:1376
msgid "Does *not* ensure the file type in any way. Returns validation failure if no data was uploaded."
msgstr ""

#: ../../chapter-12.rst:1380
msgid "filename: string/compiled regex or a list of strings/regex of valid filenames"
msgstr ""

#: ../../chapter-12.rst:1381
msgid "extension: string/compiled regex or a list of strings/regex of valid extensions"
msgstr ""

#: ../../chapter-12.rst:1382
#: ../../chapter-12.rst:1440
msgid "lastdot: which dot should be used as a filename / extension separator: ``True`` indicates last dot (e.g., \"file.tar.gz\" will be broken in \"file.tar\" + \"gz\") while ``False`` means first dot (e.g., \"file.tar.gz\" will be broken into \"file\" + \"tar.gz\")."
msgstr ""

#: ../../chapter-12.rst:1384
#: ../../chapter-12.rst:1442
msgid "case: 0 means keep the case; 1 means transform the string into lowercase (default); 2 means transform the string into uppercase."
msgstr ""

#: ../../chapter-12.rst:1386
msgid "If there is no dot present, extension checks will be done against empty string and filename checks against whole value."
msgstr ""

#: ../../chapter-12.rst:1388
msgid "Examples: Check if file has a pdf extension (case insensitive):"
msgstr ""

#: ../../chapter-12.rst:1397
msgid "Check if file is called 'thumbnail' and has a jpg or png extension (case insensitive):"
msgstr ""

#: ../../chapter-12.rst:1407
#: ../../chapter-12.rst:1455
msgid "Check if file has a tar.gz extension and name starting with backup:"
msgstr ""

#: ../../chapter-12.rst:1416
#: ../../chapter-12.rst:1462
msgid "Check if file has no extension and name matching README (case sensitive):"
msgstr ""

#: ../../chapter-12.rst:1427
msgid "``IS_UPLOAD_FILENAME``"
msgstr ""

#: ../../chapter-12.rst:1429
msgid "This is the older implementation for checking files, included for backwards compatibility.  For new applications, use ``IS_FILE()``."
msgstr ""

#: ../../chapter-12.rst:1431
msgid "This validator checks if the name and extension of a file uploaded through the file input matches the given criteria."
msgstr ""

#: ../../chapter-12.rst:1433
msgid "It does not ensure the file type in any way. Returns validation failure if no data was uploaded."
msgstr ""

#: ../../chapter-12.rst:1438
msgid "filename: filename (before dot) regex."
msgstr ""

#: ../../chapter-12.rst:1439
msgid "extension: extension (after dot) regex."
msgstr ""

#: ../../chapter-12.rst:1444
msgid "If there is no dot present, extension checks will be done against an empty string and filename checks will be done against the whole value."
msgstr ""

#: ../../chapter-12.rst:1448
msgid "Check if file has a pdf extension (case insensitive):"
msgstr ""

#: ../../chapter-12.rst:1470
msgid "``IS_IPV4``"
msgstr ""

#: ../../chapter-12.rst:1472
msgid "This validator checks if a field's value is an IP version 4 address in decimal form. Can be set to force addresses from a certain range."
msgstr ""

#: ../../chapter-12.rst:1475
msgid "IPv4 regex taken from ``regexlib``. The signature for the ``IS_IPV4`` constructor is the following:"
msgstr ""

#: ../../chapter-12.rst:1485
msgid "``minip`` is the lowest allowed address"
msgstr ""

#: ../../chapter-12.rst:1486
msgid "``maxip`` is the highest allowed address"
msgstr ""

#: ../../chapter-12.rst:1487
msgid "``invert`` is a flag to invert allowed address range, i.e. if set to True allows addresses only from outside of given range; note that range boundaries are not matched this way"
msgstr ""

#: ../../chapter-12.rst:1490
msgid "You can pass an IP address either as a string (e.g. '192.168.0.1') or as a list or tuple of 4 integers (e.g. [192, 168, 0, 1])."
msgstr ""

#: ../../chapter-12.rst:1492
msgid "To check for multiple address ranges pass to ``minip`` and ``maxip`` a list or tuple of boundary addresses, for example to allow only addresses between '192.168.20.10' and '192.168.20.19' or between '192.168.30.100' and '192.168.30.199' use:"
msgstr ""

#: ../../chapter-12.rst:1501
msgid "**Notice** that only a range for which both lower and upper limits are set is configured, that is the number of configured ranges is determined by the shorter of the iterables passed to ``minip`` and ``maxip``."
msgstr ""

#: ../../chapter-12.rst:1505
msgid "The arguments ``is_localhost``, ``is_private``, and ``is_automatic`` accept the following values:"
msgstr ""

#: ../../chapter-12.rst:1507
#: ../../chapter-12.rst:1556
msgid "``None`` to ignore the option"
msgstr ""

#: ../../chapter-12.rst:1508
#: ../../chapter-12.rst:1557
msgid "``True`` to force the option"
msgstr ""

#: ../../chapter-12.rst:1509
msgid "``False`` to forbid the option"
msgstr ""

#: ../../chapter-12.rst:1511
#: ../../chapter-12.rst:1560
msgid "The option meanings are:"
msgstr ""

#: ../../chapter-12.rst:1513
msgid "``is_localhost``: match localhost address (127.0.0.1)"
msgstr ""

#: ../../chapter-12.rst:1514
msgid "``is_private``: match address in 172.16.0.0 - 172.31.255.255 and 192.168.0.0 - 192.168.255.255 ranges"
msgstr ""

#: ../../chapter-12.rst:1515
msgid "``is_automatic``: match address in 169.254.0.0 - 169.254.255.255 range"
msgstr ""

#: ../../chapter-12.rst:1519
msgid "Check for valid IPv4 address:"
msgstr ""

#: ../../chapter-12.rst:1526
msgid "Check for valid private network IPv4 address:"
msgstr ""

#: ../../chapter-12.rst:1534
msgid "``IS_IPV6``"
msgstr ""

#: ../../chapter-12.rst:1536
msgid "This validator checks if a field's value is an IP version 6 address."
msgstr ""

#: ../../chapter-12.rst:1538
msgid "The signature for the ``IS_IPV6`` constructor is the following:"
msgstr ""

#: ../../chapter-12.rst:1553
msgid "The arguments ``is_private``, ``is_link_local``, ``is_reserved``, ``is_multicast``, ``is_routeable``, ``is_6to4``, and ``is_teredo`` accept the following values:"
msgstr ""

#: ../../chapter-12.rst:1558
msgid "``False`` to forbid the option, this does not work for ``is_routeable``"
msgstr ""

#: ../../chapter-12.rst:1562
msgid "``is_private``: match an address allocated for private networks"
msgstr ""

#: ../../chapter-12.rst:1563
msgid "``is_link_local``: match an address reserved for link-local (i.e. in fe80::/10 range), this is a private network too (also matched by ``is_private`` above)"
msgstr ""

#: ../../chapter-12.rst:1564
msgid "``is_reserved``: match an address otherwise IETF reserved"
msgstr ""

#: ../../chapter-12.rst:1565
msgid "``is_multicast``: match an address reserved for multicast use (i.e. in ff00::/8 range)"
msgstr ""

#: ../../chapter-12.rst:1566
msgid "``is_6to4``: match an address that appear to contain a 6to4 embedded address (i.e. in 2002::/16 range)"
msgstr ""

#: ../../chapter-12.rst:1567
msgid "``is_teredo``: match a teredo address (i.e. in 2001::/32 range)"
msgstr ""

#: ../../chapter-12.rst:1569
msgid "Forcing ``is_routeable`` (setting to True) is a shortcut to forbid (setting to False) ``is_private``, ``is_reserved``, and ``is_multicast`` all."
msgstr ""

#: ../../chapter-12.rst:1571
msgid "Use the ``subnets`` argument to pass a subnet or list of subnets to check for address membership, this way an address must be a subnet member to validate."
msgstr ""

#: ../../chapter-12.rst:1575
msgid "Check for valid IPv6 address:"
msgstr ""

#: ../../chapter-12.rst:1582
msgid "Check for valid private network IPv6 address:"
msgstr ""

#: ../../chapter-12.rst:1589
msgid "Check for valid IPv6 address in subnet:"
msgstr ""

#: ../../chapter-12.rst:1597
msgid "``IS_IPADDRESS``"
msgstr ""

#: ../../chapter-12.rst:1599
msgid "This validator checks if a field's value is an IP address (either version 4 or version 6). Can be set to force addresses from within a specific range. Checks are done using the appropriate ``IS_IPV4`` or ``IS_IPV6`` validator."
msgstr ""

#: ../../chapter-12.rst:1603
msgid "The signature for the ``IS_IPADDRESS`` constructor is the following:"
msgstr ""

#: ../../chapter-12.rst:1616
msgid "With respect to ``IS_IPV4`` and ``IS_IPV6`` validators the only added arguments are:"
msgstr ""

#: ../../chapter-12.rst:1618
msgid "``is_ipv4``, set to True to force version 4 or set to False to forbid version 4"
msgstr ""

#: ../../chapter-12.rst:1619
msgid "``is_ipv6``, set to True to force version 6 or set to False to forbid version 6"
msgstr ""

#: ../../chapter-12.rst:1621
msgid "Refer to IS_IPV4 and IS_IPV6 validators for the meaning of other arguments."
msgstr ""

#: ../../chapter-12.rst:1625
msgid "Check for valid IP address (both IPv4 and IPv6):"
msgstr ""

#: ../../chapter-12.rst:1632
msgid "Check for valid IP address (IPv6 only):"
msgstr ""

#: ../../chapter-12.rst:1640
msgid "Other validators"
msgstr ""

#: ../../chapter-12.rst:1644
msgid "``CLEANUP``"
msgstr ""

#: ../../chapter-12.rst:1646
msgid "This is a filter. It never fails. By default it just removes all characters whose decimal ASCII codes are not in the list [10, 13, 32-127]. It always perform an initial strip (i.e. heading and trailing blank characters removal) on the value."
msgstr ""

#: ../../chapter-12.rst:1654
msgid "You can pass a regular expression to decide what has to be removed, for example to clear all non-digit characters use:"
msgstr ""

#: ../../chapter-12.rst:1663
msgid "Database validators"
msgstr ""

#: ../../chapter-12.rst:1666
msgid "``IS_NOT_IN_DB``"
msgstr ""

#: ../../chapter-12.rst:1668
msgid "Synopsis: ``IS_NOT_IN_DB(db|set, 'table.field')``"
msgstr ""

#: ../../chapter-12.rst:1671
msgid "Consider the following example:"
msgstr ""

#: ../../chapter-12.rst:1679
msgid "It requires that when you insert a new person, his/her name is not already in the database, ``db``, in the field ``person.name``."
msgstr ""

#: ../../chapter-12.rst:1681
msgid "A set can be used instead of ``db``."
msgstr ""

#: ../../chapter-12.rst:1683
msgid "As with all other validators this requirement is enforced at the form processing level, not at the database level. This means that there is a small probability that, if two visitors try to concurrently insert records with the same person.name, this results in a race condition and both records are accepted. It is therefore safer to also inform the database that this field should have a unique value:"
msgstr ""

#: ../../chapter-12.rst:1693
msgid "Now if a race condition occurs, the database raises an OperationalError and one of the two inserts is rejected."
msgstr ""

#: ../../chapter-12.rst:1695
msgid "The first argument of ``IS_NOT_IN_DB`` can be a database connection or a Set. In the latter case, you would be checking only the set defined by the Set."
msgstr ""

#: ../../chapter-12.rst:1697
msgid "A complete argument list for ``IS_NOT_IN_DB()`` is as follows:"
msgstr ""

#: ../../chapter-12.rst:1705
msgid "The following code, for example, does not allow registration of two persons with the same name within 10 days of each other:"
msgstr ""

#: ../../chapter-12.rst:1719
msgid "``IS_IN_DB``"
msgstr ""

#: ../../chapter-12.rst:1721
msgid "Synopsis: ``IS_IN_DB(db|set, 'table.value_field', '%(representing_field)s', zero='choose one')`` where the third and fourth arguments are optional."
msgstr ""

#: ../../chapter-12.rst:1725
msgid "``multiple=`` is also possible if the field type is a list. The default is False. It can be set to True or to a tuple (min, max) to restrict the number of values selected. So ``multiple=(1, 10)`` enforces at least one and at most ten selections."
msgstr ""

#: ../../chapter-12.rst:1728
msgid "Other optional arguments are discussed below."
msgstr ""

#: ../../chapter-12.rst:1730
msgid "Example Consider the following tables and requirement:"
msgstr ""

#: ../../chapter-12.rst:1740
msgid "the IS_IN_DB requirement could also be written to use a Set instead of db"
msgstr ""

#: ../../chapter-12.rst:1748
msgid "It is enforced at the level of dog INSERT/UPDATE/DELETE forms. This example requires that a ``dog.owner`` be a valid id in the field ``person.id`` in the database ``db``. Because of this validator, the ``dog.owner`` field is represented as a drop-down list. The third argument of the validator is a string that describes the elements in the drop-down list, this is passed to the ``label`` argument of the validator. In the example you want to see the person ``%(name)s`` instead of the person ``%(id)s``. ``%(...)s`` is replaced by the value of the field in brackets for each record. Other accepted values for the ``label`` are a Field instance (e.g. you could use db.person.name instead of '%(name)s') or even a callable that takes a row and returns the description for the option."
msgstr ""

#: ../../chapter-12.rst:1756
msgid "The ``zero`` option works very much like for the ``IS_IN_SET`` validator."
msgstr ""

#: ../../chapter-12.rst:1758
msgid "Other optional arguments accepted by ``IS_IN_DB`` are: ``orderby``, ``groupby``, ``distinct``, ``cache``, and ``left``; these are passed to the db select (see :ref:`their description <orderby, groupby, limitby>` on the DAL chapter)."
msgstr ""

#: ../../chapter-12.rst:1762
msgid "**Notice** that ``groupby``, ``distinct``, and ``left`` do not apply to Google App Engine."
msgstr ""

#: ../../chapter-12.rst:1765
msgid "To alphabetically sort the options listed in the drop-down list you can set the ``sort`` argument to ``True`` (sorting is case-insensitive), this may be usefull when no ``orderby`` is feasible or practical."
msgstr ""

#: ../../chapter-12.rst:1768
msgid "The first argument of the validator can be a database connection or a DAL Set, as in ``IS_NOT_IN_DB``. This can be useful for example when wishing to limit the records in the drop-down list. In this example, we use ``IS_IN_DB`` in a controller to limit the records dynamically each time the controller is called:"
msgstr ""

#: ../../chapter-12.rst:1783
msgid "If you want the field validated, but you do not want a drop-down, you must put the validator in a list."
msgstr ""

#: ../../chapter-12.rst:1791
msgid "Occasionally you want the drop-down (so you do not want to use the list syntax above) yet you want to use additional validators. For this purpose the ``IS_IN_DB`` validator takes an extra argument ``_and`` that can point to a list of other validators applied if the validated value passes the ``IS_IN_DB`` validation. For example to validate all dog owners in db that are not in a subset:"
msgstr ""

#: ../../chapter-12.rst:1804
msgid "``IS_IN_DB`` and Tagging"
msgstr ""

#: ../../chapter-12.rst:1806
msgid "The ``IS_IN_DB`` validator has an optional attribute ``multiple=False``. If set to ``True`` multiple values can be stored in one field. This field should be of type ``list:reference`` as discussed in :ref:`list_type and contains`. An explicit example of tagging is discussed there. Multiple references are handled automatically in create and update forms, but they are transparent to the DAL. We strongly suggest using the jQuery multiselect plugin to render multiple fields."
msgstr ""

#: ../../chapter-12.rst:1813
msgid "Validation functions"
msgstr ""

#: ../../chapter-12.rst:1815
msgid "In order to explicitly define a validation function, we pass to the ``validation`` parameter a function that takes the form and returns a dictionary, mapping field names to errors. If the dictionary is non-empty, the errors will be displayed to the user, and no database I/O will take place."
msgstr ""

#: ../../chapter-12.rst:1820
msgid "Here is an example:"
msgstr ""
