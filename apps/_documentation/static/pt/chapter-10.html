

<!DOCTYPE html>
<html class="writer-html5" lang="pt" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>YATL helpers &mdash; Documentação py4web 1.20201112.1
</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/toggle.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/js/toggle.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Pesquisar" href="search.html" />
    <link rel="next" title="Internationalization" href="chapter-11.html" />
    <link rel="prev" title="YATL Template Language" href="chapter-09.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> py4web
          

          
          </a>

          
            
            
              <div class="version">
                1.20201112.1

              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="chapter-01.html">O que é py4web?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-02.html">Help, resources and hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-03.html">Installation and Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-04.html">The Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-05.html">Creating your first app</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-06.html">Fixtures</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-07.html">The database abstraction layer (DAL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-08.html">The RESTAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-09.html">YATL Template Language</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">YATL helpers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#xml"><code class="docutils literal notranslate"><span class="pre">XML</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#built-in-helpers">Built-in helpers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a"><code class="docutils literal notranslate"><span class="pre">A</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#body"><code class="docutils literal notranslate"><span class="pre">BODY</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cat"><code class="docutils literal notranslate"><span class="pre">CAT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#code"><code class="docutils literal notranslate"><span class="pre">CODE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#div"><code class="docutils literal notranslate"><span class="pre">DIV</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#em"><code class="docutils literal notranslate"><span class="pre">EM</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#form"><code class="docutils literal notranslate"><span class="pre">FORM</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#h1-h2-h3-h4-h5-h6"><code class="docutils literal notranslate"><span class="pre">H1</span></code>, <code class="docutils literal notranslate"><span class="pre">H2</span></code>, <code class="docutils literal notranslate"><span class="pre">H3</span></code>, <code class="docutils literal notranslate"><span class="pre">H4</span></code>, <code class="docutils literal notranslate"><span class="pre">H5</span></code>, <code class="docutils literal notranslate"><span class="pre">H6</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#head"><code class="docutils literal notranslate"><span class="pre">HEAD</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#html"><code class="docutils literal notranslate"><span class="pre">HTML</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#i"><code class="docutils literal notranslate"><span class="pre">I</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#img"><code class="docutils literal notranslate"><span class="pre">IMG</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#input"><code class="docutils literal notranslate"><span class="pre">INPUT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#label"><code class="docutils literal notranslate"><span class="pre">LABEL</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#li"><code class="docutils literal notranslate"><span class="pre">LI</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ol"><code class="docutils literal notranslate"><span class="pre">OL</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#option"><code class="docutils literal notranslate"><span class="pre">OPTION</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#p"><code class="docutils literal notranslate"><span class="pre">P</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre"><code class="docutils literal notranslate"><span class="pre">PRE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#script"><code class="docutils literal notranslate"><span class="pre">SCRIPT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#select"><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#span"><code class="docutils literal notranslate"><span class="pre">SPAN</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#style"><code class="docutils literal notranslate"><span class="pre">STYLE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-tr-td"><code class="docutils literal notranslate"><span class="pre">TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">TR</span></code>, <code class="docutils literal notranslate"><span class="pre">TD</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tbody"><code class="docutils literal notranslate"><span class="pre">TBODY</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#textarea"><code class="docutils literal notranslate"><span class="pre">TEXTAREA</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#th"><code class="docutils literal notranslate"><span class="pre">TH</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#thead"><code class="docutils literal notranslate"><span class="pre">THEAD</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#title"><code class="docutils literal notranslate"><span class="pre">TITLE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tr"><code class="docutils literal notranslate"><span class="pre">TR</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tt"><code class="docutils literal notranslate"><span class="pre">TT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ul"><code class="docutils literal notranslate"><span class="pre">UL</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#url"><code class="docutils literal notranslate"><span class="pre">URL</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#custom-helpers">Custom helpers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tag"><code class="docutils literal notranslate"><span class="pre">TAG</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#menu"><code class="docutils literal notranslate"><span class="pre">MENU</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beautify"><code class="docutils literal notranslate"><span class="pre">BEAUTIFY</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#server-side-dom-and-parsing">Server-side <em>DOM</em> and parsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#elements"><code class="docutils literal notranslate"><span class="pre">elements</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#components"><code class="docutils literal notranslate"><span class="pre">components</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#parent-and-siblings"><code class="docutils literal notranslate"><span class="pre">parent</span></code> and <code class="docutils literal notranslate"><span class="pre">siblings</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#replacing-elements">Replacing elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flatten"><code class="docutils literal notranslate"><span class="pre">flatten</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#parsing">Parsing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#page-layout">Page layout</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default-page-layout">Default page layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customizing-the-default-layout">Customizing the default layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mobile-development">Mobile development</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions-in-views">Functions in views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#blocks-in-views">Blocks in views</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="chapter-11.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-12.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-13.html">Authentication and Access control</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-14.html">Grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter-15.html">From web2py to py4web</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">py4web</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>YATL helpers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/web2py/py4web/blob/master/docs/chapter-10.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="yatl-helpers">
<h1>YATL helpers<a class="headerlink" href="#yatl-helpers" title="Link permanente para este título">¶</a></h1>
<p>Consider the following code in a view:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[=DIV(&#39;this&#39;, &#39;is&#39;, &#39;a&#39;, &#39;test&#39;, _id=&#39;123&#39;, _class=&#39;myclass&#39;)]]
</pre></div>
</div>
<p>it is rendered as:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;123&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;myclass&quot;</span><span class="p">&gt;</span>thisisatest<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DIV</span></code> is a helper class, i.e., something that can be used to build
HTML programmatically. It corresponds to the HTML <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> tag.</p>
<p>Positional arguments are interpreted as objects contained between the
open and close tags. Named arguments that start with an underscore are
interpreted as HTML tag attributes (without the underscore). Some
helpers also have named arguments that do not start with underscore;
these arguments are tag-specific.</p>
<p>Instead of a set of unnamed arguments, a helper can also take a single
list or tuple as its set of components using the <code class="docutils literal notranslate"><span class="pre">*</span></code> notation and it
can take a single dictionary as its set of attributes using the <code class="docutils literal notranslate"><span class="pre">**</span></code>,
for example:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[
contents = [&#39;this&#39;, &#39;is&#39;, &#39;a&#39;, &#39;test&#39;]
attributes = {&#39;_id&#39;:&#39;123&#39;, &#39;_class&#39;:&#39;myclass&#39;}
=DIV(*contents, **attributes)
]]
</pre></div>
</div>
<p>(produces the same output as before).</p>
<p>The following set of helpers:</p>
<p><code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">BEAUTIFY</span></code>, <code class="docutils literal notranslate"><span class="pre">BODY</span></code>, <code class="docutils literal notranslate"><span class="pre">CAT</span></code>, <code class="docutils literal notranslate"><span class="pre">CODE</span></code>, <code class="docutils literal notranslate"><span class="pre">DIV</span></code>, <code class="docutils literal notranslate"><span class="pre">EM</span></code>,
<code class="docutils literal notranslate"><span class="pre">FORM</span></code>, <code class="docutils literal notranslate"><span class="pre">H1</span></code>, <code class="docutils literal notranslate"><span class="pre">H2</span></code>, <code class="docutils literal notranslate"><span class="pre">H3</span></code>, <code class="docutils literal notranslate"><span class="pre">H4</span></code>, <code class="docutils literal notranslate"><span class="pre">H5</span></code>, <code class="docutils literal notranslate"><span class="pre">H6</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>,
<code class="docutils literal notranslate"><span class="pre">HTML</span></code>, <code class="docutils literal notranslate"><span class="pre">I</span></code>, <code class="docutils literal notranslate"><span class="pre">IMG</span></code>, <code class="docutils literal notranslate"><span class="pre">INPUT</span></code>, <code class="docutils literal notranslate"><span class="pre">LABEL</span></code>, <code class="docutils literal notranslate"><span class="pre">LI</span></code>, <code class="docutils literal notranslate"><span class="pre">LINK</span></code>,
<code class="docutils literal notranslate"><span class="pre">META</span></code>, <code class="docutils literal notranslate"><span class="pre">METATAG</span></code>, <code class="docutils literal notranslate"><span class="pre">OL</span></code>, <code class="docutils literal notranslate"><span class="pre">OPTION</span></code>, <code class="docutils literal notranslate"><span class="pre">PRE</span></code>, <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>,
<code class="docutils literal notranslate"><span class="pre">SPAN</span></code>, <code class="docutils literal notranslate"><span class="pre">STRONG</span></code>, <code class="docutils literal notranslate"><span class="pre">TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">TAG</span></code>, <code class="docutils literal notranslate"><span class="pre">TBODY</span></code>, <code class="docutils literal notranslate"><span class="pre">TD</span></code>,
<code class="docutils literal notranslate"><span class="pre">TEXTAREA</span></code>, <code class="docutils literal notranslate"><span class="pre">TH</span></code>, <code class="docutils literal notranslate"><span class="pre">THEAD</span></code>, <code class="docutils literal notranslate"><span class="pre">TR</span></code>, <code class="docutils literal notranslate"><span class="pre">UL</span></code>, <code class="docutils literal notranslate"><span class="pre">XML</span></code>, <code class="docutils literal notranslate"><span class="pre">sanitize</span></code>,
<code class="docutils literal notranslate"><span class="pre">xmlescape</span></code></p>
<p>can be used to build complex expressions that can then be serialized to
XML. For example:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[=DIV(B(I(&quot;hello &quot;, &quot;<span class="p">&lt;</span><span class="nt">world</span><span class="p">&gt;</span>&quot;)), _class=&quot;myclass&quot;)]]
</pre></div>
</div>
<p>is rendered:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;myclass&quot;</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">i</span><span class="p">&gt;</span>hello <span class="ni">&amp;lt;</span>world<span class="ni">&amp;gt;</span><span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Helpers can also be serialized into strings, equivalently, with the
<code class="docutils literal notranslate"><span class="pre">__str__</span></code> and the <code class="docutils literal notranslate"><span class="pre">xml</span></code> methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">DIV</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">))</span>
<span class="go">&lt;div&gt;hello world&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">DIV</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">xml</span><span class="p">()</span>
<span class="go">&lt;div&gt;hello world&lt;/div&gt;</span>
</pre></div>
</div>
<p>The helpers mechanism in py4web is more than a system to generate HTML
without concatenating strings. It provides a server-side representation
of the Document Object Model (DOM).</p>
<p>Components of helpers can be referenced via their position, and helpers
act as lists with respect to their components:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div&gt;&lt;span&gt;ab&lt;/span&gt;c&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div&gt;&lt;span&gt;yb&lt;/span&gt;&lt;b&gt;x&lt;/b&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p>Attributes of helpers can be referenced by name, and helpers act as
dictionaries with respect to their attributes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;s&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;t&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div class=&quot;s&quot;&gt;&lt;span class=&quot;t&quot;&gt;ab&lt;/span&gt;c&lt;/div&gt;</span>
</pre></div>
</div>
<p>Note, the complete set of components can be accessed via a list called
<code class="docutils literal notranslate"><span class="pre">a.components</span></code>, and the complete set of attributes can be accessed via
a dictionary called <code class="docutils literal notranslate"><span class="pre">a.attributes</span></code>. So, <code class="docutils literal notranslate"><span class="pre">a[i]</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">a.components[i]</span></code> when <code class="docutils literal notranslate"><span class="pre">i</span></code> is an integer, and <code class="docutils literal notranslate"><span class="pre">a[s]</span></code> is equivalent
to <code class="docutils literal notranslate"><span class="pre">a.attributes[s]</span></code> when <code class="docutils literal notranslate"><span class="pre">s</span></code> is a string.</p>
<p>Notice that helper attributes are passed as keyword arguments to the
helper. In some cases, however, attribute names include special
characters that are not allowed in Python identifiers (e.g., hyphens)
and therefore cannot be used as keyword argument names. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">_data</span><span class="o">-</span><span class="n">role</span><span class="o">=</span><span class="s1">&#39;collapsible&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>will not work because «_data-role» includes a hyphen, which will produce
a Python syntax error.</p>
<p>In such cases you have a couple of options. You can use the <code class="docutils literal notranslate"><span class="pre">data</span></code>
argument (this time without a leading underscore) to pass a dictionary
of related attributes without their leading hyphen, and the output will
have the desired combinations e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="s1">&#39;collapsible&#39;</span><span class="p">})</span>
<span class="go">&lt;div data-role=&quot;collapsible&quot;&gt;text&lt;/div&gt;</span>
</pre></div>
</div>
<p>or you can instead pass the attributes as a dictionary and make use of
Python’s <code class="docutils literal notranslate"><span class="pre">**</span></code> function arguments notation, which maps a dictionary of
(key:value) pairs into a set of keyword arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;_data-role&#39;</span><span class="p">:</span> <span class="s1">&#39;collapsible&#39;</span><span class="p">})</span>
<span class="go">&lt;div data-role=&quot;collapsible&quot;&gt;text&lt;/div&gt;</span>
</pre></div>
</div>
<p>Note that more elaborate entries will introduce HTML character entities,
but they will work nonetheless e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;options&#39;</span><span class="p">:</span><span class="s1">&#39;{&quot;mode&quot;:&quot;calbox&quot;, &quot;useNewStyle&quot;:true}&#39;</span><span class="p">})</span>
<span class="go">&lt;div data-options=&quot;{&amp;quot;mode&amp;quot;:&amp;quot;calbox&amp;quot;, &amp;quot;useNewStyle&amp;quot;:true}&quot;&gt;text&lt;/div&gt;</span>
</pre></div>
</div>
<p>You can also dynamically create special TAGs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TAG</span><span class="p">[</span><span class="s1">&#39;soap:Body&#39;</span><span class="p">](</span><span class="s1">&#39;whatever&#39;</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;_xmlns:m&#39;</span><span class="p">:</span><span class="s1">&#39;http://www.example.org&#39;</span><span class="p">})</span>
<span class="go">&lt;soap:Body xmlns:m=&quot;http://www.example.org&quot;&gt;whatever&lt;/soap:Body&gt;</span>
</pre></div>
</div>
<div class="section" id="xml">
<h2><code class="docutils literal notranslate"><span class="pre">XML</span></code><a class="headerlink" href="#xml" title="Link permanente para este título">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">XML</span></code> is an object used to encapsulate text that should not be
escaped. The text may or may not contain valid XML. For example, it
could contain JavaScript.</p>
<p>The text in this example is escaped:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">DIV</span><span class="p">(</span><span class="s2">&quot;&lt;b&gt;hello&lt;/b&gt;&quot;</span><span class="p">)</span>
<span class="go">&lt;div&gt;&amp;lt;b&amp;gt;hello&amp;lt;/b&amp;gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p>by using <code class="docutils literal notranslate"><span class="pre">XML</span></code> you can prevent escaping:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">DIV</span><span class="p">(</span><span class="n">XML</span><span class="p">(</span><span class="s2">&quot;&lt;b&gt;hello&lt;/b&gt;&quot;</span><span class="p">))</span>
<span class="go">&lt;div&gt;&lt;b&gt;hello&lt;/b&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p>Sometimes you want to render HTML stored in a variable, but the HTML may
contain unsafe tags such as scripts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;&#39;</span><span class="p">)</span>
<span class="go">&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;</span>
</pre></div>
</div>
<p>Un-escaped executable input such as this (for example, entered in the
body of a comment in a blog) is unsafe, because it can be used to
generate Cross Site Scripting (XSS) attacks against other visitors to
the page.</p>
<p>The py4web <code class="docutils literal notranslate"><span class="pre">XML</span></code> helper can sanitize our text to prevent injections
and escape all tags except those that you explicitly allow. Here is an
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;&#39;</span><span class="p">,</span> <span class="n">sanitize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&amp;lt;script&amp;gt;alert(&amp;quot;unsafe!&amp;quot;)&amp;lt;/script&amp;gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">XML</span></code> constructors, by default, consider the content of some tags
and some of their attributes safe. You can override the defaults using
the optional <code class="docutils literal notranslate"><span class="pre">permitted_tags</span></code> and <code class="docutils literal notranslate"><span class="pre">allowed_attributes</span></code> arguments.
Here are the default values of the optional arguments of the <code class="docutils literal notranslate"><span class="pre">XML</span></code>
helper.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">XML</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">sanitize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">permitted_tags</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;blockquote&#39;</span><span class="p">,</span> <span class="s1">&#39;br/&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">,</span>
       <span class="s1">&#39;ol&#39;</span><span class="p">,</span> <span class="s1">&#39;ul&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;cite&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">,</span> <span class="s1">&#39;img/&#39;</span><span class="p">],</span>
    <span class="n">allowed_attributes</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="s1">&#39;href&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">],</span>
       <span class="s1">&#39;img&#39;</span><span class="p">:[</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="s1">&#39;alt&#39;</span><span class="p">],</span> <span class="s1">&#39;blockquote&#39;</span><span class="p">:[</span><span class="s1">&#39;type&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="section" id="built-in-helpers">
<h2>Built-in helpers<a class="headerlink" href="#built-in-helpers" title="Link permanente para este título">¶</a></h2>
<div class="section" id="a">
<h3><code class="docutils literal notranslate"><span class="pre">A</span></code><a class="headerlink" href="#a" title="Link permanente para este título">¶</a></h3>
<p>This helper is used to build links.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">A</span><span class="p">(</span><span class="s1">&#39;&lt;click&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;me&lt;/b&gt;&#39;</span><span class="p">),</span>
<span class="go">            _href=&#39;http://www.py4web.com&#39;)</span>
<span class="go">&lt;a href=&#39;http://www.py4web.com&#39;&gt;&amp;lt;click&amp;gt;&lt;b&gt;me&lt;/b&gt;&lt;/a&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="body">
<h3><code class="docutils literal notranslate"><span class="pre">BODY</span></code><a class="headerlink" href="#body" title="Link permanente para este título">¶</a></h3>
<p>This helper makes the body of a page.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">BODY</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_bgcolor</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="go">&lt;body bgcolor=&quot;red&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="cat">
<h3><code class="docutils literal notranslate"><span class="pre">CAT</span></code><a class="headerlink" href="#cat" title="Link permanente para este título">¶</a></h3>
<p>This helper concatenates other helpers, same as TAG[“”].</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">CAT</span><span class="p">(</span><span class="s1">&#39;Here is a &#39;</span><span class="p">,</span> <span class="n">A</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="n">_href</span><span class="o">=</span><span class="n">URL</span><span class="p">()),</span> <span class="s1">&#39;, and here is some &#39;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="s1">&#39;bold text&#39;</span><span class="p">),</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="go">Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</span>
</pre></div>
</div>
</div>
<div class="section" id="code">
<h3><code class="docutils literal notranslate"><span class="pre">CODE</span></code><a class="headerlink" href="#code" title="Link permanente para este título">¶</a></h3>
<p>This helper performs syntax highlighting for Python, C, C++, HTML and
py4web code, and is preferable to <code class="docutils literal notranslate"><span class="pre">PRE</span></code> for code listings. <code class="docutils literal notranslate"><span class="pre">CODE</span></code>
also has the ability to create links to the py4web API documentation.</p>
<p>Here is an example of highlighting sections of Python code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">CODE</span><span class="p">(</span><span class="s1">&#39;print &quot;hello&quot;&#39;</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">xml</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;&lt;</span><span class="nt">tr</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;vertical-align:top;&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;min-width:40px; text-align: right;&quot;</span><span class="p">&gt;&lt;</span><span class="nt">pre</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;</span>
<span class="s">        font-size: 11px;</span>
<span class="s">        font-family: Bitstream Vera Sans Mono,monospace;</span>
<span class="s">        background-color: transparent;</span>
<span class="s">        margin: 0;</span>
<span class="s">        padding: 5px;</span>
<span class="s">        border: none;</span>
<span class="s">        color: #A0A0A0;</span>
<span class="s">    &quot;</span><span class="p">&gt;</span>1.<span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">pre</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;</span>
<span class="s">        font-size: 11px;</span>
<span class="s">        font-family: Bitstream Vera Sans Mono,monospace;</span>
<span class="s">        background-color: transparent;</span>
<span class="s">        margin: 0;</span>
<span class="s">        padding: 5px;</span>
<span class="s">        border: none;</span>
<span class="s">        overflow: auto;</span>
<span class="s">        white-space: pre !important;</span>
<span class="s">&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color:#185369; font-weight: bold&quot;</span><span class="p">&gt;</span>print <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: #FF9966&quot;</span><span class="p">&gt;</span>&quot;hello&quot;<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">pre</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Here is a similar example for HTML</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">CODE</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;body&gt;[[=request.env.remote_add]]&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">language</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;...&lt;</span><span class="n">code</span><span class="o">&gt;...</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;&lt;</span><span class="n">body</span><span class="o">&gt;</span><span class="p">[[</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">remote_add</span><span class="p">]]</span><span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">...&lt;/</span><span class="n">code</span><span class="o">&gt;...&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>These are the default arguments for the <code class="docutils literal notranslate"><span class="pre">CODE</span></code> helper:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CODE</span><span class="p">(</span><span class="s2">&quot;print &#39;hello world&#39;&quot;</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">counter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="p">{})</span>
</pre></div>
</div>
<p>Supported values for the <code class="docutils literal notranslate"><span class="pre">language</span></code> argument are “python”,
“html_plain”, “c”, “cpp”, “py4web”, and “html”. The “html” language
interprets tags as “py4web” code, while “html_plain” doesn’t.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">link</span></code> value is specified, for example “/examples/global/vars/”,
py4web API references in the code are linked to documentation at the
link URL. For example “request” would be linked to
“/examples/global/vars/request”. In the above example, the link URL is
handled by the “vars” action in the “global.py” controller that is
distributed as part of the py4web “examples” application.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">counter</span></code> argument is used for line numbering. It can be set to
any of three different values. It can be <code class="docutils literal notranslate"><span class="pre">None</span></code> for no line numbers, a
numerical value specifying the start number, or a string. If the counter
is set to a string, it is interpreted as a prompt, and there are no line
numbers.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">styles</span></code> argument is a bit tricky. If you look at the generated
HTML above, it contains a table with two columns, and each column has
its own style declared inline using CSS. The <code class="docutils literal notranslate"><span class="pre">styles</span></code> attributes
allows you to override those two CSS styles. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CODE</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;CODE&#39;</span><span class="p">:</span><span class="s1">&#39;margin: 0;padding: 5px;border: none;&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">styles</span></code> attribute must be a dictionary, and it allows two
possible keys: <code class="docutils literal notranslate"><span class="pre">CODE</span></code> for the style of the actual code, and
<code class="docutils literal notranslate"><span class="pre">LINENUMBERS</span></code> for the style of the left column, which contains the
line numbers. Mind that these styles completely replace the default
styles and are not simply added to them.</p>
</div>
<div class="section" id="div">
<h3><code class="docutils literal notranslate"><span class="pre">DIV</span></code><a class="headerlink" href="#div" title="Link permanente para este título">¶</a></h3>
<p>All helpers apart from <code class="docutils literal notranslate"><span class="pre">XML</span></code> are derived from <code class="docutils literal notranslate"><span class="pre">DIV</span></code> and inherit its
basic methods.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;div id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="em">
<h3><code class="docutils literal notranslate"><span class="pre">EM</span></code><a class="headerlink" href="#em" title="Link permanente para este título">¶</a></h3>
<p>Emphasizes its content.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">EM</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;em id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/em&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="form">
<h3><code class="docutils literal notranslate"><span class="pre">FORM</span></code><a class="headerlink" href="#form" title="Link permanente para este título">¶</a></h3>
<p>This is one of the most important helpers. In its simple form, it just
makes a <code class="docutils literal notranslate"><span class="pre">&lt;form&gt;...&lt;/form&gt;</span></code> tag, but because helpers are objects and
have knowledge of what they contain, they can process submitted forms
(for example, perform validation of the fields). This will be discussed
in detail in <a class="reference external" href="#chapter-12">Chapter 12</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">FORM</span><span class="p">(</span><span class="n">INPUT</span><span class="p">(</span><span class="n">_type</span><span class="o">=</span><span class="s1">&#39;submit&#39;</span><span class="p">),</span> <span class="n">_action</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">_method</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
<span class="go">&lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="go">&lt;input type=&quot;submit&quot; /&gt;&lt;/form&gt;</span>
</pre></div>
</div>
<p>The “enctype” is “multipart/form-data” by default.</p>
<p>The constructor of a <code class="docutils literal notranslate"><span class="pre">FORM</span></code>, and of <code class="docutils literal notranslate"><span class="pre">SQLFORM</span></code>, can also take a
special argument called <code class="docutils literal notranslate"><span class="pre">hidden</span></code>. When a dictionary is passed as
<code class="docutils literal notranslate"><span class="pre">hidden</span></code>, its items are translated into “hidden” INPUT fields. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">FORM</span><span class="p">(</span><span class="n">hidden</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">))</span>
<span class="go">&lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="go">&lt;input value=&quot;b&quot; type=&quot;hidden&quot; name=&quot;a&quot; /&gt;&lt;/form&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="h1-h2-h3-h4-h5-h6">
<h3><code class="docutils literal notranslate"><span class="pre">H1</span></code>, <code class="docutils literal notranslate"><span class="pre">H2</span></code>, <code class="docutils literal notranslate"><span class="pre">H3</span></code>, <code class="docutils literal notranslate"><span class="pre">H4</span></code>, <code class="docutils literal notranslate"><span class="pre">H5</span></code>, <code class="docutils literal notranslate"><span class="pre">H6</span></code><a class="headerlink" href="#h1-h2-h3-h4-h5-h6" title="Link permanente para este título">¶</a></h3>
<p>These helpers are for paragraph headings and subheadings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">H1</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;h1 id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/h1&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="head">
<h3><code class="docutils literal notranslate"><span class="pre">HEAD</span></code><a class="headerlink" href="#head" title="Link permanente para este título">¶</a></h3>
<p>For tagging the HEAD of an HTML page.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">HEAD</span><span class="p">(</span><span class="n">TITLE</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">)))</span>
<span class="go">&lt;head&gt;&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;&lt;/head&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="html">
<h3><code class="docutils literal notranslate"><span class="pre">HTML</span></code><a class="headerlink" href="#html" title="Link permanente para este título">¶</a></h3>
<p>This helper is a little different. In addition to making the <code class="docutils literal notranslate"><span class="pre">&lt;html&gt;</span></code>
tags, it prepends the tag with a doctype string.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">HTML</span><span class="p">(</span><span class="n">BODY</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">)))</span>
<span class="go">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span>
<span class="go">&lt;html&gt;&lt;body&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;&lt;/html&gt;</span>
</pre></div>
</div>
<p>The HTML helper also takes some additional optional arguments that have
the following default:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">HTML</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="n">doctype</span><span class="o">=</span><span class="s1">&#39;transitional&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where doctype can be ‘strict’, ‘transitional’, ‘frameset’, ‘html5’, or a
full doctype string.</p>
</div>
<div class="section" id="i">
<h3><code class="docutils literal notranslate"><span class="pre">I</span></code><a class="headerlink" href="#i" title="Link permanente para este título">¶</a></h3>
<p>This helper makes its contents italic.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">I</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;i id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/i&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="img">
<h3><code class="docutils literal notranslate"><span class="pre">IMG</span></code><a class="headerlink" href="#img" title="Link permanente para este título">¶</a></h3>
<p>It can be used to embed images into HTML:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">IMG</span><span class="p">(</span><span class="n">_src</span><span class="o">=</span><span class="s1">&#39;http://example.com/image.png&#39;</span><span class="p">,</span> <span class="n">_alt</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="go"> ![](http://example.com/image.ong){ alt=&quot;rest&quot; }</span>
</pre></div>
</div>
<p>Here is a combination of A, IMG, and URL helpers for including a static
image with a link:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">A</span><span class="p">(</span><span class="n">IMG</span><span class="p">(</span><span class="n">_src</span><span class="o">=</span><span class="n">URL</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">),</span> <span class="n">_alt</span><span class="o">=</span><span class="s2">&quot;My Logo&quot;</span><span class="p">),</span>
<span class="gp">... </span>  <span class="n">_href</span><span class="o">=</span><span class="n">URL</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">))</span>
<span class="gp">...</span>
<span class="go">&lt;a href=&quot;/myapp/default/index&quot;&gt;</span>
<span class="go">   ![](/myapp/static/logo.png){ alt=&quot;My Logo&quot; }</span>
<span class="go">&lt;/a&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="input">
<h3><code class="docutils literal notranslate"><span class="pre">INPUT</span></code><a class="headerlink" href="#input" title="Link permanente para este título">¶</a></h3>
<p>Creates an <code class="docutils literal notranslate"><span class="pre">&lt;input.../&gt;</span></code> tag. An input tag may not contain other tags,
and is closed by <code class="docutils literal notranslate"><span class="pre">/&gt;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>. The input tag has an optional
attribute <code class="docutils literal notranslate"><span class="pre">_type</span></code> that can be set to “text” (the default), “submit”,
“checkbox”, or “radio”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">INPUT</span><span class="p">(</span><span class="n">_name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_value</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">&lt;input value=&quot;a&quot; name=&quot;test&quot; /&gt;</span>
</pre></div>
</div>
<p>It also takes an optional special argument called “value”, distinct from
«_value“. The latter sets the default value for the input field; the
former sets its current value. For an input of type”text», the former
overrides the latter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">INPUT</span><span class="p">(</span><span class="n">_name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_value</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="go">&lt;input value=&quot;b&quot; name=&quot;test&quot; /&gt;</span>
</pre></div>
</div>
<p>For radio buttons, <code class="docutils literal notranslate"><span class="pre">INPUT</span></code> selectively sets the “checked” attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">INPUT</span><span class="p">(</span><span class="n">_type</span><span class="o">=</span><span class="s1">&#39;radio&#39;</span><span class="p">,</span> <span class="n">_name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_value</span><span class="o">=</span><span class="n">v</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">v</span>
<span class="gp">...</span>
<span class="go">&lt;input value=&quot;a&quot; type=&quot;radio&quot; name=&quot;test&quot; /&gt; a</span>
<span class="go">&lt;input value=&quot;b&quot; type=&quot;radio&quot; checked=&quot;checked&quot; name=&quot;test&quot; /&gt; b</span>
<span class="go">&lt;input value=&quot;c&quot; type=&quot;radio&quot; name=&quot;test&quot; /&gt; c</span>
</pre></div>
</div>
<p>and similarly for checkboxes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">INPUT</span><span class="p">(</span><span class="n">_type</span><span class="o">=</span><span class="s1">&#39;checkbox&#39;</span><span class="p">,</span> <span class="n">_name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_value</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&lt;input value=&quot;a&quot; type=&quot;checkbox&quot; checked=&quot;checked&quot; name=&quot;test&quot; /&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">INPUT</span><span class="p">(</span><span class="n">_type</span><span class="o">=</span><span class="s1">&#39;checkbox&#39;</span><span class="p">,</span> <span class="n">_name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_value</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">&lt;input value=&quot;a&quot; type=&quot;checkbox&quot; name=&quot;test&quot; /&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="label">
<h3><code class="docutils literal notranslate"><span class="pre">LABEL</span></code><a class="headerlink" href="#label" title="Link permanente para este título">¶</a></h3>
<p>It is used to create a LABEL tag for an INPUT field.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">LABEL</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;label id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/label&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="li">
<h3><code class="docutils literal notranslate"><span class="pre">LI</span></code><a class="headerlink" href="#li" title="Link permanente para este título">¶</a></h3>
<p>It makes a list item and should be contained in a <code class="docutils literal notranslate"><span class="pre">UL</span></code> or <code class="docutils literal notranslate"><span class="pre">OL</span></code> tag.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">LI</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;li id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ol">
<h3><code class="docutils literal notranslate"><span class="pre">OL</span></code><a class="headerlink" href="#ol" title="Link permanente para este título">¶</a></h3>
<p>It stands for Ordered List. The list should contain LI tags. <code class="docutils literal notranslate"><span class="pre">OL</span></code>
arguments that are not <code class="docutils literal notranslate"><span class="pre">LI</span></code> objects are automatically enclosed in
<code class="docutils literal notranslate"><span class="pre">&lt;li&gt;...&lt;/li&gt;</span></code> tags.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">OL</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ol id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;li&gt;&amp;lt;hello&amp;gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="option">
<h3><code class="docutils literal notranslate"><span class="pre">OPTION</span></code><a class="headerlink" href="#option" title="Link permanente para este título">¶</a></h3>
<p>This should only be used as part of a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>/<code class="docutils literal notranslate"><span class="pre">OPTION</span></code> combination.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">OPTION</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_value</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">&lt;option value=&quot;a&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/option&gt;</span>
</pre></div>
</div>
<p>As in the case of <code class="docutils literal notranslate"><span class="pre">INPUT</span></code>, py4web make a distinction between «_value»
(the value of the OPTION), and “value” (the current value of the
enclosing select). If they are equal, the option is “selected”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">SELECT</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">):</span>
<span class="go">&lt;select&gt;</span>
<span class="go">&lt;option value=&quot;a&quot;&gt;a&lt;/option&gt;</span>
<span class="go">&lt;option value=&quot;b&quot; selected=&quot;selected&quot;&gt;b&lt;/option&gt;</span>
<span class="go">&lt;/select&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="p">
<h3><code class="docutils literal notranslate"><span class="pre">P</span></code><a class="headerlink" href="#p" title="Link permanente para este título">¶</a></h3>
<p>This is for tagging a paragraph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">P</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;p id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/p&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="pre">
<h3><code class="docutils literal notranslate"><span class="pre">PRE</span></code><a class="headerlink" href="#pre" title="Link permanente para este título">¶</a></h3>
<p>Generates a <code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;...&lt;/pre&gt;</span></code> tag for displaying pre-formatted text.
The <code class="docutils literal notranslate"><span class="pre">CODE</span></code> helper is generally preferable for code listings.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">PRE</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;pre id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/pre&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="script">
<h3><code class="docutils literal notranslate"><span class="pre">SCRIPT</span></code><a class="headerlink" href="#script" title="Link permanente para este título">¶</a></h3>
<p>This is include or link a script, such as JavaScript. The content
between the tags is rendered as an HTML comment, for the benefit of
really old browsers.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">SCRIPT</span><span class="p">(</span><span class="s1">&#39;alert(&quot;hello world&quot;);&#39;</span><span class="p">,</span> <span class="n">_type</span><span class="o">=</span><span class="s1">&#39;text/javascript&#39;</span><span class="p">)</span>
<span class="go">&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--</span>
<span class="go">alert(&quot;hello world&quot;);</span>
<span class="go">//--&gt;&lt;/script&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="select">
<h3><code class="docutils literal notranslate"><span class="pre">SELECT</span></code><a class="headerlink" href="#select" title="Link permanente para este título">¶</a></h3>
<p>Makes a <code class="docutils literal notranslate"><span class="pre">&lt;select&gt;...&lt;/select&gt;</span></code> tag. This is used with the <code class="docutils literal notranslate"><span class="pre">OPTION</span></code>
helper. Those <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> arguments that are not <code class="docutils literal notranslate"><span class="pre">OPTION</span></code> objects are
automatically converted to options.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">SELECT</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;select id=&quot;0&quot; class=&quot;test&quot;&gt;</span>
<span class="go">&lt;option value=&quot;&amp;lt;hello&amp;gt;&quot;&gt;&amp;lt;hello&amp;gt;&lt;/option&gt;</span>
<span class="go">&lt;option value=&quot;&amp;lt;b&amp;gt;world&amp;lt;/b&amp;gt;&quot;&gt;&lt;b&gt;world&lt;/b&gt;&lt;/option&gt;</span>
<span class="go">&lt;/select&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="span">
<h3><code class="docutils literal notranslate"><span class="pre">SPAN</span></code><a class="headerlink" href="#span" title="Link permanente para este título">¶</a></h3>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">DIV</span></code> but used to tag inline (rather than block) content.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;span id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/span&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="style">
<h3><code class="docutils literal notranslate"><span class="pre">STYLE</span></code><a class="headerlink" href="#style" title="Link permanente para este título">¶</a></h3>
<p>Similar to script, but used to either include or link CSS code. Here the
CSS is included:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">STYLE</span><span class="p">(</span><span class="n">XML</span><span class="p">(</span><span class="s1">&#39;body {color: white}&#39;</span><span class="p">))</span>
<span class="go">&lt;style&gt;&lt;!--</span>
<span class="go">body { color: white }</span>
<span class="go">//--&gt;&lt;/style&gt;</span>
</pre></div>
</div>
<p>and here it is linked:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">STYLE</span><span class="p">(</span><span class="n">_src</span><span class="o">=</span><span class="s1">&#39;style.css&#39;</span><span class="p">)</span>
<span class="go">&lt;style src=&quot;style.css&quot;&gt;&lt;!--</span>
<span class="go">//--&gt;&lt;/style&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="table-tr-td">
<h3><code class="docutils literal notranslate"><span class="pre">TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">TR</span></code>, <code class="docutils literal notranslate"><span class="pre">TD</span></code><a class="headerlink" href="#table-tr-td" title="Link permanente para este título">¶</a></h3>
<p>These tags (along with the optional <code class="docutils literal notranslate"><span class="pre">THEAD</span></code> and <code class="docutils literal notranslate"><span class="pre">TBODY</span></code> helpers) are
used to build HTML tables.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TABLE</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="n">TD</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="n">TD</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)),</span> <span class="n">TR</span><span class="p">(</span><span class="n">TD</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">),</span> <span class="n">TD</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)))</span>
<span class="go">&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">TR</span></code> expects <code class="docutils literal notranslate"><span class="pre">TD</span></code> content; arguments that are not <code class="docutils literal notranslate"><span class="pre">TD</span></code> objects are
converted automatically.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TABLE</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">TR</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">))</span>
<span class="go">&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
</pre></div>
</div>
<p>It is easy to convert a Python array into an HTML table using Python’s
<code class="docutils literal notranslate"><span class="pre">*</span></code> function arguments notation, which maps list elements to
positional function arguments.</p>
<p>Here, we will do it line by line:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TABLE</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="o">*</span><span class="n">table</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">TR</span><span class="p">(</span><span class="o">*</span><span class="n">table</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="go">&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
</pre></div>
</div>
<p>Here we do all lines at once:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TABLE</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">TR</span><span class="p">(</span><span class="o">*</span><span class="n">rows</span><span class="p">)</span> <span class="k">for</span> <span class="n">rows</span> <span class="ow">in</span> <span class="n">table</span><span class="p">])</span>
<span class="go">&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="tbody">
<h3><code class="docutils literal notranslate"><span class="pre">TBODY</span></code><a class="headerlink" href="#tbody" title="Link permanente para este título">¶</a></h3>
<p>This is used to tag rows contained in the table body, as opposed to
header or footer rows. It is optional.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TBODY</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;tbody id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="textarea">
<h3><code class="docutils literal notranslate"><span class="pre">TEXTAREA</span></code><a class="headerlink" href="#textarea" title="Link permanente para este título">¶</a></h3>
<p>This helper makes a <code class="docutils literal notranslate"><span class="pre">&lt;textarea&gt;...&lt;/textarea&gt;</span></code> tag.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TEXTAREA</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="go">&lt;textarea class=&quot;test&quot; cols=&quot;40&quot; rows=&quot;10&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/textarea&gt;</span>
</pre></div>
</div>
<p>The only caveat is that its optional “value” overrides its content
(inner HTML)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TEXTAREA</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;&lt;hello world&gt;&quot;</span><span class="p">,</span> <span class="n">_class</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
<span class="go">&lt;textarea class=&quot;test&quot; cols=&quot;40&quot; rows=&quot;10&quot;&gt;&amp;lt;hello world&amp;gt;&lt;/textarea&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="th">
<h3><code class="docutils literal notranslate"><span class="pre">TH</span></code><a class="headerlink" href="#th" title="Link permanente para este título">¶</a></h3>
<p>This is used instead of <code class="docutils literal notranslate"><span class="pre">TD</span></code> in table headers.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TH</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;th id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/th&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="thead">
<h3><code class="docutils literal notranslate"><span class="pre">THEAD</span></code><a class="headerlink" href="#thead" title="Link permanente para este título">¶</a></h3>
<p>This is used to tag table header rows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">THEAD</span><span class="p">(</span><span class="n">TR</span><span class="p">(</span><span class="n">TH</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">)),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;thead id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;th&gt;&amp;lt;hello&amp;gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="title">
<h3><code class="docutils literal notranslate"><span class="pre">TITLE</span></code><a class="headerlink" href="#title" title="Link permanente para este título">¶</a></h3>
<p>This is used to tag the title of a page in an HTML header.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TITLE</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">))</span>
<span class="go">&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="tr">
<h3><code class="docutils literal notranslate"><span class="pre">TR</span></code><a class="headerlink" href="#tr" title="Link permanente para este título">¶</a></h3>
<p>Tags a table row. It should be rendered inside a table and contain
<code class="docutils literal notranslate"><span class="pre">&lt;td&gt;...&lt;/td&gt;</span></code> tags. <code class="docutils literal notranslate"><span class="pre">TR</span></code> arguments that are not <code class="docutils literal notranslate"><span class="pre">TD</span></code> objects will
be automatically converted.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TR</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;tr id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;world&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="tt">
<h3><code class="docutils literal notranslate"><span class="pre">TT</span></code><a class="headerlink" href="#tt" title="Link permanente para este título">¶</a></h3>
<p>Tags text as typewriter (monospaced) text.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">TT</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;tt id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/tt&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ul">
<h3><code class="docutils literal notranslate"><span class="pre">UL</span></code><a class="headerlink" href="#ul" title="Link permanente para este título">¶</a></h3>
<p>Signifies an Unordered List and should contain <code class="docutils literal notranslate"><span class="pre">LI</span></code> items. If its
content is not tagged as <code class="docutils literal notranslate"><span class="pre">LI</span></code>, <code class="docutils literal notranslate"><span class="pre">UL</span></code> does it automatically.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">UL</span><span class="p">(</span><span class="s1">&#39;&lt;hello&gt;&#39;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;world&lt;/b&gt;&#39;</span><span class="p">),</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ul id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;li&gt;&amp;lt;hello&amp;gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="url">
<h3><code class="docutils literal notranslate"><span class="pre">URL</span></code><a class="headerlink" href="#url" title="Link permanente para este título">¶</a></h3>
<p>The URL helper is documented in <em>Chapter 4 URL ../04</em></p>
</div>
</div>
<div class="section" id="custom-helpers">
<h2>Custom helpers<a class="headerlink" href="#custom-helpers" title="Link permanente para este título">¶</a></h2>
<div class="section" id="tag">
<h3><code class="docutils literal notranslate"><span class="pre">TAG</span></code><a class="headerlink" href="#tag" title="Link permanente para este título">¶</a></h3>
<p>Sometimes you need to generate custom XML tags. py4web provides <code class="docutils literal notranslate"><span class="pre">TAG</span></code>,
a universal tag generator.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[=TAG.name(&#39;a&#39;, &#39;b&#39;, _c=&#39;d&#39;)]]
</pre></div>
</div>
<p>generates the following XML</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;name</span> <span class="na">c=</span><span class="s">&quot;d&quot;</span><span class="nt">&gt;</span>ab<span class="nt">&lt;/name&gt;</span>
</pre></div>
</div>
<p>Arguments “a”, “b”, and “d” are automatically escaped; use the <code class="docutils literal notranslate"><span class="pre">XML</span></code>
helper to suppress this behavior. Using <code class="docutils literal notranslate"><span class="pre">TAG</span></code> you can generate
HTML/XML tags not already provided by the API. TAGs can be nested, and
are serialized with <code class="docutils literal notranslate"><span class="pre">str().</span></code> An equivalent syntax is:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[=TAG[&#39;name&#39;](&#39;a&#39;, &#39;b&#39;, c=&#39;d&#39;)]]
</pre></div>
</div>
<p>If the TAG object is created with an empty name, it can be used to
concatenate multiple strings and HTML helpers together without inserting
them into a surrounding tag, but this use is deprecated. Use the <code class="docutils literal notranslate"><span class="pre">CAT</span></code>
helper instead.</p>
<p>Self-closing tags can be generated with the TAG helper. The tag name
must end with a “/”.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[=TAG[&#39;link/&#39;](_href=&#39;http://py4web.com&#39;)]]
</pre></div>
</div>
<p>generates the following XML:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;link</span> <span class="na">ref=</span><span class="s">&quot;http://py4web.com&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">TAG</span></code> is an object, and <code class="docutils literal notranslate"><span class="pre">TAG.name</span></code> or <code class="docutils literal notranslate"><span class="pre">TAG['name']</span></code> is
a function that returns a temporary helper class.</p>
</div>
<div class="section" id="menu">
<h3><code class="docutils literal notranslate"><span class="pre">MENU</span></code><a class="headerlink" href="#menu" title="Link permanente para este título">¶</a></h3>
<p>The MENU helper takes a list of lists or of tuples of the form of
<code class="docutils literal notranslate"><span class="pre">response.menu</span></code> and generates a tree-like structure using unordered
lists representing the menu. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">MENU</span><span class="p">([[</span><span class="s1">&#39;One&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;link1&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Two&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;link2&#39;</span><span class="p">]])</span>
<span class="go">&lt;ul class=&quot;py4web-menu py4web-menu-vertical&quot;&gt;</span>
<span class="go">&lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</span>
<span class="go">&lt;/ul&gt;</span>
</pre></div>
</div>
<blockquote>
<div><p>The first item in each list/tuple is the text to be displayed for the
given menu item.</p>
</div></blockquote>
<p>The second item in each list/tuple is a boolean indicating whether that
particular menu item is active (i.e., the currently selected item). When
set to True, the <code class="docutils literal notranslate"><span class="pre">MENU</span></code> helper will add a “py4web-menu-active” class
to the <code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code> for that item (you can change the name of that class via
the “li_active” argument to <code class="docutils literal notranslate"><span class="pre">MENU</span></code>). Another way to specify the active
url is by directly passing it to <code class="docutils literal notranslate"><span class="pre">MENU</span></code> via its “active_url” argument.</p>
<p>The third item in each list/tuple can be an HTML helper (which could
include nested helpers), and the <code class="docutils literal notranslate"><span class="pre">MENU</span></code> helper will simply render that
helper rather than creating its own <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code> tag.</p>
<p>Each menu item can have a fourth argument that is a nested submenu (and
so on recursively):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">MENU</span><span class="p">([[</span><span class="s1">&#39;One&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;link1&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="s1">&#39;Two&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;link2&#39;</span><span class="p">]]]])</span>
<span class="go">&lt;ul class=&quot;py4web-menu py4web-menu-vertical&quot;&gt;</span>
<span class="go">&lt;li class=&quot;py4web-menu-expand&quot;&gt;</span>
<span class="go">&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</span>
<span class="go">&lt;ul class=&quot;py4web-menu-vertical&quot;&gt;</span>
<span class="go">&lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</span>
<span class="go">&lt;/ul&gt;</span>
<span class="go">&lt;/li&gt;</span>
<span class="go">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>A menu item can also have an optional 5th element, which is a boolean.
When false, the menu item is ignored by the MENU helper.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">MENU</span></code> helper takes the following optional arguments: -
<code class="docutils literal notranslate"><span class="pre">_class</span></code>: defaults to “py4web-menu py4web-menu-vertical” and sets the
class of the outer UL elements. - <code class="docutils literal notranslate"><span class="pre">ul_class</span></code>: defaults to
“py4web-menu-vertical” and sets the class of the inner UL elements. -
<code class="docutils literal notranslate"><span class="pre">li_class</span></code>: defaults to “py4web-menu-expand” and sets the class of the
inner LI elements. - <code class="docutils literal notranslate"><span class="pre">li_first</span></code>: allows to add a class to the first
list element. - <code class="docutils literal notranslate"><span class="pre">li_last</span></code>: allows to add a class to the last list
element.</p>
<p><code class="docutils literal notranslate"><span class="pre">MENU</span></code> takes an optional argument <code class="docutils literal notranslate"><span class="pre">mobile</span></code>. When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>
instead of building a recursive <code class="docutils literal notranslate"><span class="pre">UL</span></code> menu structure it returns a
<code class="docutils literal notranslate"><span class="pre">SELECT</span></code> dropdown with all the menu options and a <code class="docutils literal notranslate"><span class="pre">onchange</span></code>
attribute that redirects to the page corresponding to the selected
option. This is designed an an alternative menu representation that
increases usability on small mobile devices such as phones.</p>
<p>Normally the menu is used in a layout with the following syntax:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[=MENU(response.menu, mobile=request.user_agent().is_mobile)]]
</pre></div>
</div>
<p>In this way a mobile device is automatically detected and the menu is
rendered accordingly.</p>
</div>
</div>
<div class="section" id="beautify">
<h2><code class="docutils literal notranslate"><span class="pre">BEAUTIFY</span></code><a class="headerlink" href="#beautify" title="Link permanente para este título">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">BEAUTIFY</span></code> is used to build HTML representations of compound objects,
including lists, tuples and dictionaries:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})]]
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">BEAUTIFY</span></code> returns an XML-like object serializable to XML, with a nice
looking representation of its constructor argument. In this case, the
XML representation of:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="n">XML</span><span class="p">(</span><span class="s2">&quot;world&quot;</span><span class="p">)],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span>
</pre></div>
</div>
<p>will render as:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>a<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>:<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>hello<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>world<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>b<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>:<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>1<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>2<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="server-side-dom-and-parsing">
<h2>Server-side <em>DOM</em> and parsing<a class="headerlink" href="#server-side-dom-and-parsing" title="Link permanente para este título">¶</a></h2>
<div class="section" id="elements">
<h3><code class="docutils literal notranslate"><span class="pre">elements</span></code><a class="headerlink" href="#elements" title="Link permanente para este título">¶</a></h3>
<p>The DIV helper and all derived helpers provide the search methods
<code class="docutils literal notranslate"><span class="pre">element</span></code> and <code class="docutils literal notranslate"><span class="pre">elements</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">element</span></code> returns the first child element matching a specified
condition (or None if no match).</p>
<p><code class="docutils literal notranslate"><span class="pre">elements</span></code> returns a list of all matching children.</p>
<p><strong>element</strong> and <strong>elements</strong> use the same syntax to specify the matching
condition, which allows for three possibilities that can be mixed and
matched: jQuery-like expressions, match by exact attribute value, match
using regular expressions.</p>
<p>Here is a simple example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">DIV</span><span class="p">(</span><span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;abc&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;div#target&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;changed&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div&gt;&lt;div&gt;&lt;div id=&quot;target&quot; class=&quot;abc&quot;&gt;changed&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p>The un-named argument of <code class="docutils literal notranslate"><span class="pre">elements</span></code> is a string, which may contain:
the name of a tag, the id of a tag preceded by a pound symbol, the class
preceded by a dot, the explicit value of an attribute in square
brackets.</p>
<p>Here are 4 equivalent ways to search the previous tag by id:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;#target&#39;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;div#target&#39;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;div[id=target]&#39;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here are 4 equivalent ways to search the previous tag by class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;.abc&#39;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;div.abc&#39;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;div[class=abc]&#39;</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Any attribute can be used to locate an element (not just <code class="docutils literal notranslate"><span class="pre">id</span></code> and
<code class="docutils literal notranslate"><span class="pre">class</span></code>), including multiple attributes (the function element can take
multiple named arguments), but only the first matching element will be
returned.</p>
<p>Using the jQuery syntax “div#target” it is possible to specify multiple
search criteria separated by a comma:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="s1">&#39;t1&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;c2&#39;</span><span class="p">))</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;span#t1, div.c2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or equivalently</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="s1">&#39;t1&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;c2&#39;</span><span class="p">))</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;span#t1&#39;</span><span class="p">,</span> <span class="s1">&#39;div.c2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the value of an attribute is specified using a name argument, it can
be a string or a regular expression:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="s1">&#39;test123&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">_class</span><span class="o">=</span><span class="s1">&#39;c2&#39;</span><span class="p">))</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">_id</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;test\d</span><span class="si">{3}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A special named argument of the DIV (and derived) helpers is <code class="docutils literal notranslate"><span class="pre">find</span></code>.
It can be used to specify a search value or a search regular expression
in the text content of the tag. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;fghij&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="n">find</span><span class="o">=</span><span class="s1">&#39;bcd&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&lt;span&gt;abcde&lt;/span&gt;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;fghij&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="n">find</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;fg\w</span><span class="si">{3}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&lt;div&gt;fghij&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="components">
<h3><code class="docutils literal notranslate"><span class="pre">components</span></code><a class="headerlink" href="#components" title="Link permanente para este título">¶</a></h3>
<p>Here’s an example of listing all elements in an html string:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">html</span> <span class="o">=</span> <span class="n">TAG</span><span class="p">(</span><span class="s1">&#39;&lt;a&gt;xxx&lt;/a&gt;&lt;b&gt;yyy&lt;/b&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">html</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">item</span>
<span class="gp">...</span>
<span class="go">&lt;a&gt;xxx&lt;/a&gt;</span>
<span class="go">&lt;b&gt;yyy&lt;/b&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="parent-and-siblings">
<h3><code class="docutils literal notranslate"><span class="pre">parent</span></code> and <code class="docutils literal notranslate"><span class="pre">siblings</span></code><a class="headerlink" href="#parent-and-siblings" title="Link permanente para este título">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">parent</span></code> returns the parent of the current element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">parent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;_class&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">siblings</span><span class="p">():</span> <span class="nb">print</span> <span class="n">e</span>
<span class="go">&lt;div&gt;b&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="replacing-elements">
<h3>Replacing elements<a class="headerlink" href="#replacing-elements" title="Link permanente para este título">¶</a></h3>
<p>Elements that are matched can also be replaced or removed by specifying
the <code class="docutils literal notranslate"><span class="pre">replace</span></code> argument. Notice that a list of the original matching
elements is still returned as usual.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="n">P</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">replace</span></code> can be a callable. In this case it will be passed the
original element and it is expected to return the replacement element:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">P</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div&gt;&lt;p&gt;x&lt;/p&gt;&lt;div&gt;&lt;p&gt;y&lt;/p&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">replace=None</span></code>, matching elements will be removed completely.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span>
<span class="go">&lt;div&gt;&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="flatten">
<h3><code class="docutils literal notranslate"><span class="pre">flatten</span></code><a class="headerlink" href="#flatten" title="Link permanente para este título">¶</a></h3>
<p>The flatten method recursively serializes the content of the children of
a given element into regular text (without tags):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="n">DIV</span><span class="p">(</span><span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))),</span> <span class="n">SPAN</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="go">thisisatest</span>
</pre></div>
</div>
<p>Flatten can be passed an optional argument, <code class="docutils literal notranslate"><span class="pre">render</span></code>, i.e. a function
that renders/flattens the content using a different protocol. Here is an
example to serialize some tags into Markmin wiki syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">(</span><span class="n">H1</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">),</span> <span class="n">P</span><span class="p">(</span><span class="s1">&#39;example of a &#39;</span><span class="p">,</span> <span class="n">A</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="n">_href</span><span class="o">=</span><span class="s1">&#39;#test&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gluon.html</span> <span class="kn">import</span> <span class="n">markmin_serializer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">a</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">render</span><span class="o">=</span><span class="n">markmin_serializer</span><span class="p">)</span>
<span class="go"># titles</span>

<span class="go">example of *a link *</span>
</pre></div>
</div>
<p>At the time of writing we provide <code class="docutils literal notranslate"><span class="pre">markmin_serializer</span></code> and
<code class="docutils literal notranslate"><span class="pre">markdown_serializer</span></code>.</p>
</div>
<div class="section" id="parsing">
<h3>Parsing<a class="headerlink" href="#parsing" title="Link permanente para este título">¶</a></h3>
<p>The TAG object is also an XML/HTML parser. It can read text and convert
into a tree structure of helpers. This allows manipulation using the API
above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;test&lt;/span&gt;&lt;/p&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsed_html</span> <span class="o">=</span> <span class="n">TAG</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsed_html</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;TEST&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">parsed_html</span>
<span class="go">&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;TEST&lt;/span&gt;&lt;/p&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="page-layout">
<h2>Page layout<a class="headerlink" href="#page-layout" title="Link permanente para este título">¶</a></h2>
<p>Views can extend and include other views in a tree-like structure.</p>
<p>For example, we can think of a view “index.html” that extends
“layout.html” and includes “body.html”. At the same time, “layout.html”
may include “header.html” and “footer.html”.</p>
<p>The root of the tree is what we call a layout view. Just like any other
HTML template file, you can edit it using the py4web administrative
interface. The file name “layout.html” is just a convention.</p>
<p>Here is a minimalist page that extends the “layout.html” view and
includes the “page.html” view:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">extend</span> <span class="s1">&#39;layout.html&#39;</span><span class="p">]]</span>
<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Hello</span> <span class="n">World</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="p">[[</span><span class="n">include</span> <span class="s1">&#39;page.html&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>The extended layout file must contain an <code class="docutils literal notranslate"><span class="pre">[[include]]</span></code> directive,
something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Page</span> <span class="n">Title</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
    <span class="p">[[</span><span class="n">include</span><span class="p">]]</span>
  <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>When the view is called, the extended (layout) view is loaded, and the
calling view replaces the <code class="docutils literal notranslate"><span class="pre">[[include]]</span></code> directive inside the layout.
Processing continues recursively until all <code class="docutils literal notranslate"><span class="pre">extend</span></code> and <code class="docutils literal notranslate"><span class="pre">include</span></code>
directives have been processed. The resulting template is then
translated into Python code. Note, when an application is bytecode
compiled, it is this Python code that is compiled, not the original view
files themselves. So, the bytecode compiled version of a given view is a
single .pyc file that includes the Python code not just for the original
view file, but for its entire tree of extended and included views.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">extend</span></code>, <code class="docutils literal notranslate"><span class="pre">include</span></code>, <code class="docutils literal notranslate"><span class="pre">block</span></code> and <code class="docutils literal notranslate"><span class="pre">super</span></code> are special template
directives, not Python commands.</p>
</div></blockquote>
<p>Any content or code that precedes the <code class="docutils literal notranslate"><span class="pre">[[extend</span> <span class="pre">...]]</span></code> directive will
be inserted (and therefore executed) before the beginning of the
extended view’s content/code. Although this is not typically used to
insert actual HTML content before the extended view’s content, it can be
useful as a means to define variables or functions that you want to make
available to the extended view. For example, consider a view
“index.html”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">sidebar_enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">]]</span>
<span class="p">[[</span><span class="n">extend</span> <span class="s1">&#39;layout.html&#39;</span><span class="p">]]</span>
<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Home</span> <span class="n">Page</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>and an excerpt from “layout.html”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="k">if</span> <span class="n">sidebar_enabled</span><span class="p">:]]</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;sidebar&quot;</span><span class="o">&gt;</span>
        <span class="n">Sidebar</span> <span class="n">Content</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="p">[[</span><span class="k">pass</span><span class="p">]]</span>
</pre></div>
</div>
<p>Because the <code class="docutils literal notranslate"><span class="pre">sidebar_enabled</span></code> assignment in “index.html” comes before
the <code class="docutils literal notranslate"><span class="pre">extend</span></code>, that line gets inserted before the beginning of
“layout.html”, making <code class="docutils literal notranslate"><span class="pre">sidebar_enabled</span></code> available anywhere within the
“layout.html” code (a somewhat more sophisticated version of this is
used in the <strong>welcome</strong> app).</p>
<p>It is also worth pointing out that the variables returned by the
controller function are available not only in the function’s main view,
but in all of its extended and included views as well.</p>
<p>The argument of an <code class="docutils literal notranslate"><span class="pre">extend</span></code> or <code class="docutils literal notranslate"><span class="pre">include</span></code> (i.e., the extended or
included view name) can be a Python variable (though not a Python
expression). However, this imposes a limitation – views that use
variables in <code class="docutils literal notranslate"><span class="pre">extend</span></code> or <code class="docutils literal notranslate"><span class="pre">include</span></code> statements cannot be bytecode
compiled. As noted above, bytecode-compiled views include the entire
tree of extended and included views, so the specific extended and
included views must be known at compile time, which is not possible if
the view names are variables (whose values are not determined until run
time). Because bytecode compiling views can provide a significant speed
boost, using variables in <code class="docutils literal notranslate"><span class="pre">extend</span></code> and <code class="docutils literal notranslate"><span class="pre">include</span></code> should generally be
avoided if possible.</p>
<p>In some cases, an alternative to using a variable in an <code class="docutils literal notranslate"><span class="pre">include</span></code> is
simply to place regular <code class="docutils literal notranslate"><span class="pre">[[include</span> <span class="pre">...]]</span></code> directives inside an
<code class="docutils literal notranslate"><span class="pre">if...else</span></code> block.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[if some_condition:]]
[[include &#39;this_view.html&#39;]]
[[else:]]
[[include &#39;that_view.html&#39;]]
[[pass]]
</pre></div>
</div>
<p>The above code does not present any problem for bytecode compilation
because no variables are involved. Note, however, that the bytecode
compiled view will actually include the Python code for both
“this_view.html” and “that_view.html”, though only the code for one of
those views will be executed, depending on the value of
<code class="docutils literal notranslate"><span class="pre">some_condition</span></code>.</p>
<p>Keep in mind, this only works for <code class="docutils literal notranslate"><span class="pre">include</span></code> – you cannot place
<code class="docutils literal notranslate"><span class="pre">[[extend</span> <span class="pre">...]]</span></code> directives inside <code class="docutils literal notranslate"><span class="pre">if...else</span></code> blocks.</p>
<p>Layouts are used to encapsulate page commonality (headers, footers,
menus), and though they are not mandatory, they will make your
application easier to write and maintain. In particular, we suggest
writing layouts that take advantage of the following variables that can
be set in the controller. Using these well known variables will help
make your layouts interchangeable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="n">title</span>
<span class="n">response</span><span class="o">.</span><span class="n">subtitle</span>
<span class="n">response</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">author</span>
<span class="n">response</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">keywords</span>
<span class="n">response</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">description</span>
<span class="n">response</span><span class="o">.</span><span class="n">flash</span>
<span class="n">response</span><span class="o">.</span><span class="n">menu</span>
<span class="n">response</span><span class="o">.</span><span class="n">files</span>
</pre></div>
</div>
<p>Except for <code class="docutils literal notranslate"><span class="pre">menu</span></code> and <code class="docutils literal notranslate"><span class="pre">files</span></code>, these are all strings and their
meaning should be obvious.</p>
<p><code class="docutils literal notranslate"><span class="pre">response.menu</span></code> menu is a list of 3-tuples or 4-tuples. The three
elements are: the link name, a boolean representing whether the link is
active (is the current link), and the URL of the linked page. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Google&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;http://www.google.com&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                 <span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">,</span>  <span class="kc">True</span><span class="p">,</span>  <span class="n">URL</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">),</span> <span class="p">[])]</span>
</pre></div>
</div>
<p>The fourth tuple element is an optional sub-menu.</p>
<p><code class="docutils literal notranslate"><span class="pre">response.files</span></code> is a list of CSS and JS files that are needed by your
page.</p>
<p>We also recommend that you use:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[include &#39;py4web_ajax.html&#39;]]
</pre></div>
</div>
<p>in the HTML head, since this will include the jQuery libraries and
define some backward-compatible JavaScript functions for special effects
and Ajax. “py4web_ajax.html” includes the <code class="docutils literal notranslate"><span class="pre">response.meta</span></code> tags in the
view, jQuery base, the calendar datepicker, and all required CSS and JS
<code class="docutils literal notranslate"><span class="pre">response.files</span></code>.</p>
<div class="section" id="default-page-layout">
<h3>Default page layout<a class="headerlink" href="#default-page-layout" title="Link permanente para este título">¶</a></h3>
<p>The “views/layout.html” that ships with the py4web scaffolding
application <strong>welcome</strong> (stripped down of some optional parts) is quite
complex but it has the following structure:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>[[=response.title or request.application]]<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  ...
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;[[=URL(&#39;static&#39;, &#39;js/modernizr.custom.js&#39;)]]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

  [[
  response.files.append(URL(&#39;static&#39;, &#39;css/py4web.css&#39;))
  response.files.append(URL(&#39;static&#39;, &#39;css/bootstrap.min.css&#39;))
  response.files.append(URL(&#39;static&#39;, &#39;css/bootstrap-responsive.min.css&#39;))
  response.files.append(URL(&#39;static&#39;, &#39;css/py4web_bootstrap.css&#39;))
  ]]

  [[include &#39;py4web_ajax.html&#39;]]

  [[
  # using sidebars need to know what sidebar you want to use
  left_sidebar_enabled = globals().get(&#39;left_sidebar_enabled&#39;, False)
  right_sidebar_enabled = globals().get(&#39;right_sidebar_enabled&#39;, False)
  middle_columns = {0:&#39;span12&#39;, 1:&#39;span9&#39;, 2:&#39;span6&#39;}[
    (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]
  ]]

  [[block head]][[end]]
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- Navbar ================================================== --&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar navbar-inverse navbar-fixed-top&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flash&quot;</span><span class="p">&gt;</span>[[=response.flash or &#39;&#39;]]<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-inner&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
        [[=response.logo or &#39;&#39;]]
        <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;navbar&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav pull-right&quot;</span><span class="p">&gt;</span>
          [[=&#39;auth&#39; in globals() and auth.navbar(mode=&quot;dropdown&quot;) or &#39;&#39;]]
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-collapse&quot;</span><span class="p">&gt;</span>
          [[if response.menu:]]
          [[=MENU(response.menu)]]
          [[pass]]
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span><span class="c">&lt;!--/.nav-collapse --&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span><span class="c">&lt;!--/top navbar --&gt;</span>

  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- Masthead ================================================== --&gt;</span>
    <span class="p">&lt;</span><span class="nt">header</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mastheader row&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;header&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;span12&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-header&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>
                    [[=response.title or request.application]]
                    <span class="p">&lt;</span><span class="nt">small</span><span class="p">&gt;</span>[[=response.subtitle or &#39;&#39;]]<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;main&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;main row&quot;</span><span class="p">&gt;</span>
        [[if left_sidebar_enabled:]]
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;span3 left-sidebar&quot;</span><span class="p">&gt;</span>
            [[block left_sidebar]]
            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Left Sidebar<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            [[end]]
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        [[pass]]

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;[[=middle_columns]]&quot;</span><span class="p">&gt;</span>
            [[block center]]
            [[include]]
            [[end]]
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        [[if right_sidebar_enabled:]]
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;span3&quot;</span><span class="p">&gt;</span>
            [[block right_sidebar]]
            <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Right Sidebar<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            [[end]]
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        [[pass]]
    <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span><span class="c">&lt;!--/main--&gt;</span>

    <span class="c">&lt;!-- Footer ================================================== --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">footer</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;footer span12&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;footer&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;footer-content&quot;</span><span class="p">&gt;</span>
                [[block footer]] <span class="c">&lt;!-- this is default footer --&gt;</span>
                ...
                [[end]]
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span> <span class="c">&lt;!-- /container --&gt;</span>

  <span class="c">&lt;!-- The javascript =============================================</span>
<span class="c">       (Placed at the end of the document so the pages load faster) --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;[[=URL(&#39;static&#39;, &#39;js/bootstrap.min.js&#39;)]]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;[[=URL(&#39;static&#39;, &#39;js/py4web_bootstrap.js&#39;)]]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  [[if response.google_analytics_id:]]
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;[[=URL(&#39;static&#39;, &#39;js/analytics.js&#39;)]]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
    <span class="nx">analytics</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
      <span class="s1">&#39;Google Analytics&#39;</span><span class="o">:</span><span class="p">{</span><span class="nx">trackingId</span><span class="o">:</span><span class="s1">&#39;[[=response.google_analytics_id]]&#39;</span><span class="p">}</span>
    <span class="p">});&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  [[pass]]
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>There are a few features of this default layout that make it very easy
to use and customize:</p>
<ul class="simple">
<li><p>It is written in HTML5 and uses the “modernizr” library for backward
compatibility. The actual layout includes some extra conditional
statements required by IE and they are omitted for brevity.</p></li>
<li><p>It displays both <code class="docutils literal notranslate"><span class="pre">response.title</span></code> and <code class="docutils literal notranslate"><span class="pre">response.subtitle</span></code> which
can be set in a model or a controller. If they are not set, it adopts
the application name as title.</p></li>
<li><p>It includes the <code class="docutils literal notranslate"><span class="pre">py4web_ajax.html</span></code> file in the header which
generated all the link and script import statements.</p></li>
<li><p>It uses a modified version of Twitter Bootstrap for flexible layouts
which works on mobile devices and re-arranges columns to fit small
screens.</p></li>
<li><p>It uses “analytics.js” to connect to Google Analytics.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">[[=auth.navbar(...)]]</span></code> displays a welcome to the current user
and links to the auth functions like login, logout, register, change
password, etc. depending on context. <code class="docutils literal notranslate"><span class="pre">auth.navbar</span></code> is a helper
factory and its output can be manipulated as any other helper. It is
placed in an expression to check for auth definition, the expression
evaluates to ’’ in case auth is undefined.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">[[=MENU(response.menu)]]</span></code> displays the menu structure as
<code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;...&lt;/ul&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[[include]]</span></code> is replaced by the content of the extending view when
the page is rendered.</p></li>
<li><p>By default it uses a conditional three column (the left and right
sidebars can be turned off by the extending views)</p></li>
<li><p>It uses the following classes: page-header, main, footer.</p></li>
<li><p>It contains the following blocks: head, left_sidebar, center,
right_sidebar, footer.</p></li>
</ul>
<p>In views, you can turn on and customize sidebars as follows:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[left_sidebar_enabled=True]]
[[extend &#39;layout.html&#39;]]

This text goes in center

[[block left_sidebar]]
This text goes in sidebar
[[end]]
</pre></div>
</div>
</div>
<div class="section" id="customizing-the-default-layout">
<h3>Customizing the default layout<a class="headerlink" href="#customizing-the-default-layout" title="Link permanente para este título">¶</a></h3>
<p>Customizing the default layout without editing is easy because the
welcome application is based on Twitter Bootstrap which is well
documented and supports themes. In py4web four static files which are
relevant to style:</p>
<ul class="simple">
<li><p>“css/py4web.css” contains py4web specific styles</p></li>
<li><p>“css/bootstrap.min.css” contains the Twitter Bootstrap CSS style</p></li>
<li><p>“css/py4web_bootstrap.css” which overrides some Bootstrap styles to
conform to py4web needs.</p></li>
<li><p>“js/bootstrap.min.js” which includes the libraries for menu effects,
modals, panels.</p></li>
</ul>
<p>To change colors and background images, try append the following code to
layout.html header:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span>
<span class="nt">body</span> <span class="p">{</span> <span class="k">background</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;images/background.png&#39;</span><span class="p">)</span> <span class="kc">repeat-x</span> <span class="mh">#3A3A3A</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">a</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#349C01</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">page-header</span> <span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#349C01</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">page-header</span> <span class="nt">h2</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span> <span class="k">font-style</span><span class="p">:</span> <span class="kc">italic</span><span class="p">;</span> <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;}</span>
<span class="p">.</span><span class="nc">statusbar</span> <span class="p">{</span> <span class="k">background</span><span class="p">:</span> <span class="mh">#333333</span><span class="p">;</span> <span class="k">border-bottom</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span> <span class="mh">#349C01</span> <span class="kc">solid</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">statusbar</span> <span class="nt">a</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span> <span class="p">}</span>
<span class="p">.</span><span class="nc">footer</span> <span class="p">{</span> <span class="k">border-top</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span> <span class="mh">#349C01</span> <span class="kc">solid</span><span class="p">;</span> <span class="p">}</span>
<span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Of course you can also completely replace the “layout.html” and
“py4web.css” files with your own.</p>
</div>
<div class="section" id="mobile-development">
<h3>Mobile development<a class="headerlink" href="#mobile-development" title="Link permanente para este título">¶</a></h3>
<p>Although the default layout.html is designed to be mobile-friendly, one
may sometimes need to use different views when a page is visited by a
mobile device.</p>
<p>To make developing for desktop and mobile devices easier, py4web
includes the <code class="docutils literal notranslate"><span class="pre">&#64;mobilize</span></code> decorator. This decorator is applied to
actions that should have a normal view and a mobile view. This is
demonstrated here:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gluon.contrib.user_agent_parser</span> <span class="kn">import</span> <span class="n">mobilize</span>
<span class="nd">@mobilize</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">()</span>
</pre></div>
</div>
<p>Notice that the decorator must be imported before using it in a
controller. When the “index” function is called from a regular browser
(desktop computer), py4web will render the returned dictionary using the
view “[controller]/index.html”. However, when it is called by a mobile
device, the dictionary will be rendered by
“[controller]/index.mobile.html”. Notice that mobile views have the
“mobile.html” extension.</p>
<p>Alternatively you can apply the following logic to make all views mobile
friendly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user_agent</span><span class="p">()</span><span class="o">.</span><span class="n">is_mobile</span><span class="p">:</span>
    <span class="n">response</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span> <span class="s1">&#39;.mobile.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The task of creating the «*.mobile.html» views is left to the developer
but we strongly suggest using the “jQuery Mobile” plugin which makes the
task very easy.</p>
</div>
</div>
<div class="section" id="functions-in-views">
<h2>Functions in views<a class="headerlink" href="#functions-in-views" title="Link permanente para este título">¶</a></h2>
<p>Consider this “layout.html”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
    <span class="p">[[</span><span class="n">include</span><span class="p">]]</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;sidebar&quot;</span><span class="o">&gt;</span>
      <span class="p">[[</span><span class="k">if</span> <span class="s1">&#39;mysidebar&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():]][[</span><span class="n">mysidebar</span><span class="p">()]][[</span><span class="k">else</span><span class="p">:]]</span>
        <span class="n">my</span> <span class="n">default</span> <span class="n">sidebar</span>
      <span class="p">[[</span><span class="k">pass</span><span class="p">]]</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>and this extending view</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[def mysidebar():]]
my new sidebar!!!
[[return]]
[[extend &#39;layout.html&#39;]]
Hello World!!!
</pre></div>
</div>
<p>Notice the function is defined before the <code class="docutils literal notranslate"><span class="pre">[[extend...]]</span></code> statement –
this results in the function being created before the “layout.html” code
is executed, so the function can be called anywhere within
“layout.html”, even before the <code class="docutils literal notranslate"><span class="pre">[[include]]</span></code>. Also notice the function
is included in the extended view without the <code class="docutils literal notranslate"><span class="pre">=</span></code> prefix.</p>
<p>The code generates the following output:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    Hello World!!!
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidebar&quot;</span><span class="p">&gt;</span>
      my new sidebar!!!
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Notice that the function is defined in HTML (although it could also
contain Python code) so that <code class="docutils literal notranslate"><span class="pre">response.write</span></code> is used to write its
content (the function does not return the content). This is why the
layout calls the view function using <code class="docutils literal notranslate"><span class="pre">[[mysidebar()]]</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">[[=mysidebar()]]</span></code>. Functions defined in this way can take arguments.</p>
</div>
<div class="section" id="blocks-in-views">
<h2>Blocks in views<a class="headerlink" href="#blocks-in-views" title="Link permanente para este título">¶</a></h2>
<p>The main way to make a view more modular is by using
<code class="docutils literal notranslate"><span class="pre">[[block</span> <span class="pre">...]]</span></code>s and this mechanism is an alternative to the
mechanism discussed in the previous section.</p>
<p>To understand how this works, consider apps based on the scaffolding app
welcome, which has a view layout.html. This view is extended by the view
<code class="docutils literal notranslate"><span class="pre">default/index.html</span></code> via <code class="docutils literal notranslate"><span class="pre">[[extend</span> <span class="pre">'layout.html']]</span></code>. The contents of
layout.html predefine certain blocks with certain default content, and
these are therefore included into default/index.html.</p>
<p>You can override these default content blocks by enclosing your new
content inside the same block name. The location of the block in the
layout.html is not changed, but the contents is.</p>
<p>Here is a simplifed version. Imagine this is “layout.html”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
    <span class="p">[[</span><span class="n">include</span><span class="p">]]</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;sidebar&quot;</span><span class="o">&gt;</span>
      <span class="p">[[</span><span class="n">block</span> <span class="n">mysidebar</span><span class="p">]]</span>
        <span class="n">my</span> <span class="n">default</span> <span class="n">sidebar</span> <span class="p">(</span><span class="n">this</span> <span class="n">content</span> <span class="n">to</span> <span class="n">be</span> <span class="n">replaced</span><span class="p">)</span>
      <span class="p">[[</span><span class="n">end</span><span class="p">]]</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>and this is a simple extending view <code class="docutils literal notranslate"><span class="pre">default/index.html</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[extend &#39;layout.html&#39;]]
Hello World!!!
[[block mysidebar]]
my new sidebar!!!
[[end]]
</pre></div>
</div>
<p>It generates the following output, where the content is provided by the
over-riding block in the extending view, yet the enclosing DIV and class
comes from layout.html. This allows consistency across views:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    Hello World!!!
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidebar&quot;</span><span class="p">&gt;</span>
        my new sidebar!!!
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The real layout.html defines a number of useful blocks, and you can
easily add more to match the layout your desire.</p>
<p>You can have many blocks, and if a block is present in the extended view
but not in the extending view, the content of the extended view is used.
Also, notice that unlike with functions, it is not necessary to define
blocks before the <code class="docutils literal notranslate"><span class="pre">[[extend</span> <span class="pre">...]]</span></code> – even if defined after the
<code class="docutils literal notranslate"><span class="pre">extend</span></code>, they can be used to make substitutions anywhere in the
extended view.</p>
<p>Inside a block, you can use the expression <code class="docutils literal notranslate"><span class="pre">[[super]]</span></code> to include the
content of the parent. For example, if we replace the above extending
view with:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>[[extend &#39;layout.html&#39;]]
Hello World!!!
[[block mysidebar]]
[[super]]
my new sidebar!!!
[[end]]
</pre></div>
</div>
<p>we get:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    Hello World!!!
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidebar&quot;</span><span class="p">&gt;</span>
        my default sidebar
        my new sidebar!
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="chapter-11.html" class="btn btn-neutral float-right" title="Internationalization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="chapter-09.html" class="btn btn-neutral float-left" title="YATL Template Language" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, BSDv3 License

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      
      
     <span class="fa fa-element">
     <input class="container_toggle" type="checkbox" id="switch" name="mode">
     <label for="switch"></label>
     </span>
      
      v: 1.20201112.1

      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <dl>
        <dt>Languages</dt>
        
          
          
          <dd><a href="../en/index.html">en</a></dd> 
        
           <strong> 
          <dd><a href="../pt/index.html">pt</a></dd> </strong>
          
        
      </dl>
      
      
      <dl>
        <dt>Versions</dt>
        
          
          <dd><a href="index.html">current</a></dd>
          
        
      </dl>
      
      
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="py4web_pt.pdf">pdf</a></dd>
        
          <dd><a href="py4web_pt.epub">epub</a></dd>
        
      </dl>
      
      
      <hr/>
    </div>
  </div>

 

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>